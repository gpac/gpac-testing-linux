<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - coverage.info - scenegraph/xml_ns.c</title>
  <link rel="stylesheet" type="text/css" href="../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title">LCOV - code coverage report</td></tr>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../index.html">top level</a> - <a href="index.html">scenegraph</a> - xml_ns.c<span style="font-size: 80%;"> (source / <a href="xml_ns.c.func-sort-c.html">functions</a>)</span></td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
            <td class="headerItem">Test:</td>
            <td class="headerValue">coverage.info</td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">203</td>
            <td class="headerCovTableEntry">357</td>
            <td class="headerCovTableEntryLo">56.9 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2021-04-29 23:48:07</td>
            <td></td>
            <td class="headerItem">Functions:</td>
            <td class="headerCovTableEntry">20</td>
            <td class="headerCovTableEntry">23</td>
            <td class="headerCovTableEntryMed">87.0 %</td>
          </tr>
          <tr><td><img src="../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span>            : /*</a>
<span class="lineNum">       2 </span>            :  *                      GPAC - Multimedia Framework C SDK
<span class="lineNum">       3 </span>            :  *
<span class="lineNum">       4 </span>            :  *                      Authors: Jean Le Feuvre - Cyril Concolato
<span class="lineNum">       5 </span>            :  *                      Copyright (c) Telecom ParisTech 2000-2020
<span class="lineNum">       6 </span>            :  *                                      All rights reserved
<span class="lineNum">       7 </span>            :  *
<span class="lineNum">       8 </span>            :  *  This file is part of GPAC / SVG Scene Graph sub-project
<span class="lineNum">       9 </span>            :  *
<span class="lineNum">      10 </span>            :  *  GPAC is free software, TYPE, 0 }, you can redistribute it and/or modify
<span class="lineNum">      11 </span>            :  *  it under the terms of the GNU Lesser General Public License as published by
<span class="lineNum">      12 </span>            :  *  the Free Software Foundation, TYPE, 0 }, either version 2, or (at your option)
<span class="lineNum">      13 </span>            :  *  any later version.
<span class="lineNum">      14 </span>            :  *
<span class="lineNum">      15 </span>            :  *  GPAC is distributed in the hope that it will be useful,
<span class="lineNum">      16 </span>            :  *  but WITHOUT ANY WARRANTY, TYPE, 0 }, without even the implied warranty of
<span class="lineNum">      17 </span>            :  *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
<span class="lineNum">      18 </span>            :  *  GNU Lesser General Public License for more details.
<span class="lineNum">      19 </span>            :  *
<span class="lineNum">      20 </span>            :  *  You should have received a copy of the GNU Lesser General Public
<span class="lineNum">      21 </span>            :  *  License along with this library, TYPE, 0 }, see the file COPYING.  If not, write to
<span class="lineNum">      22 </span>            :  *  the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.
<span class="lineNum">      23 </span>            :  *
<span class="lineNum">      24 </span>            :  */
<span class="lineNum">      25 </span>            : 
<span class="lineNum">      26 </span>            : 
<span class="lineNum">      27 </span>            : #include &lt;gpac/internal/scenegraph_dev.h&gt;
<span class="lineNum">      28 </span>            : 
<span class="lineNum">      29 </span>            : #ifndef GPAC_DISABLE_SVG
<span class="lineNum">      30 </span>            : 
<span class="lineNum">      31 </span>            : #include &lt;gpac/nodes_svg.h&gt;
<span class="lineNum">      32 </span>            : 
<span class="lineNum">      33 </span>            : enum
<span class="lineNum">      34 </span>            : {
<span class="lineNum">      35 </span>            :         /*no specific criteria*/
<span class="lineNum">      36 </span>            :         GF_SVG_ATTOPT_NONE = 0,
<span class="lineNum">      37 </span>            :         /*attribute only valid for SMIL anims*/
<span class="lineNum">      38 </span>            :         GF_SVG_ATTOPT_SMIL = 1,
<span class="lineNum">      39 </span>            :         /*attribute only valid for TEXT*/
<span class="lineNum">      40 </span>            :         GF_SVG_ATTOPT_TEXT = 2,
<span class="lineNum">      41 </span>            :         /*attribute only valid for cursor*/
<span class="lineNum">      42 </span>            :         GF_SVG_ATTOPT_CURSOR = 3,
<span class="lineNum">      43 </span>            :         /*attribute only valid for listener*/
<span class="lineNum">      44 </span>            :         GF_SVG_ATTOPT_LISTENER = 4,
<span class="lineNum">      45 </span>            :         /*attribute only valid for filters*/
<span class="lineNum">      46 </span>            :         GF_SVG_ATTOPT_FILTER = 5,
<span class="lineNum">      47 </span>            : } GF_SVGAttOption;
<span class="lineNum">      48 </span>            : 
<span class="lineNum">      49 </span>            : /* unused XBL tags (deprecated)
<span class="lineNum">      50 </span>            : 
<span class="lineNum">      51 </span>            :         TAG_XBL_ATT_RANGE_FIRST = TAG_SVG_ATT_RANGE_FIRST + 256,
<span class="lineNum">      52 </span>            :         TAG_XBL_ATT_id = TAG_XBL_ATT_RANGE_FIRST,
<span class="lineNum">      53 </span>            :         TAG_XBL_ATT_extends,
<span class="lineNum">      54 </span>            :         TAG_XBL_ATT_display,
<span class="lineNum">      55 </span>            :         TAG_XBL_ATT_inheritstyle,
<span class="lineNum">      56 </span>            :         TAG_XBL_ATT_includes,
<span class="lineNum">      57 </span>            :         TAG_XBL_ATT_name,
<span class="lineNum">      58 </span>            :         TAG_XBL_ATT_implements,
<span class="lineNum">      59 </span>            :         TAG_XBL_ATT_type,
<span class="lineNum">      60 </span>            :         TAG_XBL_ATT_readonly,
<span class="lineNum">      61 </span>            :         TAG_XBL_ATT_onget,
<span class="lineNum">      62 </span>            :         TAG_XBL_ATT_onset,
<span class="lineNum">      63 </span>            :         TAG_XBL_ATT_event,
<span class="lineNum">      64 </span>            :         TAG_XBL_ATT_action,
<span class="lineNum">      65 </span>            :         TAG_XBL_ATT_phase,
<span class="lineNum">      66 </span>            :         TAG_XBL_ATT_button,
<span class="lineNum">      67 </span>            :         TAG_XBL_ATT_modifiers,
<span class="lineNum">      68 </span>            :         TAG_XBL_ATT_keycode,
<span class="lineNum">      69 </span>            :         TAG_XBL_ATT_key,
<span class="lineNum">      70 </span>            :         TAG_XBL_ATT_charcode,
<span class="lineNum">      71 </span>            :         TAG_XBL_ATT_clickcount,
<span class="lineNum">      72 </span>            :         TAG_XBL_ATT_command,
<span class="lineNum">      73 </span>            :         TAG_XBL_ATT_preventdefault,
<span class="lineNum">      74 </span>            :         TAG_XBL_ATT_src,
<span class="lineNum">      75 </span>            : */
<span class="lineNum">      76 </span>            : static const struct xml_att_def {
<span class="lineNum">      77 </span>            :         const char *name;
<span class="lineNum">      78 </span>            :         u32 tag;
<span class="lineNum">      79 </span>            :         u32 type;
<span class="lineNum">      80 </span>            :         u32 opts;
<span class="lineNum">      81 </span>            :         u32 xmlns;
<span class="lineNum">      82 </span>            : } xml_attributes [] =
<span class="lineNum">      83 </span>            : {
<span class="lineNum">      84 </span>            :         /*XML base*/
<span class="lineNum">      85 </span>            :         { &quot;id&quot;, TAG_XML_ATT_id, SVG_ID_datatype, 0, GF_XMLNS_XML } ,
<span class="lineNum">      86 </span>            :         { &quot;base&quot;, TAG_XML_ATT_base, XMLRI_datatype, 0, GF_XMLNS_XML } ,
<span class="lineNum">      87 </span>            :         { &quot;lang&quot;, TAG_XML_ATT_lang, SVG_LanguageID_datatype, 0, GF_XMLNS_XML } ,
<span class="lineNum">      88 </span>            :         { &quot;space&quot;, TAG_XML_ATT_space, XML_Space_datatype, 0, GF_XMLNS_XML } ,
<span class="lineNum">      89 </span>            : 
<span class="lineNum">      90 </span>            :         /*XLINK*/
<span class="lineNum">      91 </span>            :         { &quot;type&quot;, TAG_XLINK_ATT_type, DOM_String_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      92 </span>            :         { &quot;role&quot;, TAG_XLINK_ATT_role, XMLRI_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      93 </span>            :         { &quot;arcrole&quot;, TAG_XLINK_ATT_arcrole, XMLRI_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      94 </span>            :         { &quot;title&quot;, TAG_XLINK_ATT_title, DOM_String_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      95 </span>            :         { &quot;href&quot;, TAG_XLINK_ATT_href, XMLRI_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      96 </span>            :         { &quot;show&quot;, TAG_XLINK_ATT_show, DOM_String_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      97 </span>            :         { &quot;actuate&quot;, TAG_XLINK_ATT_actuate, DOM_String_datatype, 0, GF_XMLNS_XLINK },
<span class="lineNum">      98 </span>            : 
<span class="lineNum">      99 </span>            :         /*XML Events*/
<span class="lineNum">     100 </span>            :         { &quot;event&quot;, TAG_XMLEV_ATT_event, XMLEV_Event_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     101 </span>            :         { &quot;phase&quot;, TAG_XMLEV_ATT_phase, XMLEV_Phase_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     102 </span>            :         { &quot;propagate&quot;, TAG_XMLEV_ATT_propagate, XMLEV_Propagate_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     103 </span>            :         { &quot;defaultAction&quot;, TAG_XMLEV_ATT_defaultAction, XMLEV_DefaultAction_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     104 </span>            :         { &quot;observer&quot;, TAG_XMLEV_ATT_observer, XML_IDREF_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     105 </span>            :         { &quot;target&quot;, TAG_XMLEV_ATT_target, XML_IDREF_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     106 </span>            :         { &quot;handler&quot;, TAG_XMLEV_ATT_handler, XMLRI_datatype, 0, GF_XMLNS_XMLEV },
<span class="lineNum">     107 </span>            : 
<span class="lineNum">     108 </span>            : 
<span class="lineNum">     109 </span>            :         { &quot;id&quot;, TAG_SVG_ATT_id, SVG_ID_datatype, 0, GF_XMLNS_SVG } ,
<span class="lineNum">     110 </span>            :         { &quot;class&quot;, TAG_SVG_ATT__class, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     111 </span>            :         { &quot;requiredFeatures&quot;, TAG_SVG_ATT_requiredFeatures, XMLRI_List_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     112 </span>            :         { &quot;requiredExtensions&quot;, TAG_SVG_ATT_requiredExtensions, XMLRI_List_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     113 </span>            :         { &quot;requiredFormats&quot;, TAG_SVG_ATT_requiredFormats, DOM_StringList_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     114 </span>            :         { &quot;requiredFonts&quot;, TAG_SVG_ATT_requiredFonts, DOM_StringList_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     115 </span>            :         { &quot;systemLanguage&quot;, TAG_SVG_ATT_systemLanguage, DOM_StringList_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     116 </span>            :         { &quot;display&quot;, TAG_SVG_ATT_display, SVG_Display_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     117 </span>            :         { &quot;visibility&quot;, TAG_SVG_ATT_visibility, SVG_Visibility_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     118 </span>            :         { &quot;image-rendering&quot;, TAG_SVG_ATT_image_rendering, SVG_RenderingHint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     119 </span>            :         { &quot;pointer-events&quot;, TAG_SVG_ATT_pointer_events, SVG_PointerEvents_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     120 </span>            :         { &quot;shape-rendering&quot;, TAG_SVG_ATT_shape_rendering, SVG_RenderingHint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     121 </span>            :         { &quot;text-rendering&quot;, TAG_SVG_ATT_text_rendering, SVG_RenderingHint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     122 </span>            :         { &quot;audio-level&quot;, TAG_SVG_ATT_audio_level, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     123 </span>            :         { &quot;viewport-fill&quot;, TAG_SVG_ATT_viewport_fill, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     124 </span>            :         { &quot;viewport-fill-opacity&quot;, TAG_SVG_ATT_viewport_fill_opacity, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     125 </span>            :         { &quot;overflow&quot;, TAG_SVG_ATT_overflow, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     126 </span>            :         { &quot;fill-opacity&quot;, TAG_SVG_ATT_fill_opacity, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     127 </span>            :         { &quot;stroke-opacity&quot;, TAG_SVG_ATT_stroke_opacity, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     128 </span>            :         { &quot;fill-rule&quot;, TAG_SVG_ATT_fill_rule, SVG_FillRule_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     129 </span>            :         { &quot;stroke&quot;, TAG_SVG_ATT_stroke, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     130 </span>            :         { &quot;stroke-dasharray&quot;, TAG_SVG_ATT_stroke_dasharray, SVG_StrokeDashArray_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     131 </span>            :         { &quot;stroke-dashoffset&quot;, TAG_SVG_ATT_stroke_dashoffset, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     132 </span>            :         { &quot;stroke-linecap&quot;, TAG_SVG_ATT_stroke_linecap, SVG_StrokeLineCap_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     133 </span>            :         { &quot;stroke-linejoin&quot;, TAG_SVG_ATT_stroke_linejoin, SVG_StrokeLineJoin_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     134 </span>            :         { &quot;stroke-miterlimit&quot;, TAG_SVG_ATT_stroke_miterlimit, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     135 </span>            :         { &quot;stroke-width&quot;, TAG_SVG_ATT_stroke_width, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     136 </span>            :         { &quot;color&quot;, TAG_SVG_ATT_color, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     137 </span>            :         { &quot;color-rendering&quot;, TAG_SVG_ATT_color_rendering, SVG_RenderingHint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     138 </span>            :         { &quot;vector-effect&quot;, TAG_SVG_ATT_vector_effect, SVG_VectorEffect_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     139 </span>            :         { &quot;solid-color&quot;, TAG_SVG_ATT_solid_color, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     140 </span>            :         { &quot;solid-opacity&quot;, TAG_SVG_ATT_solid_opacity, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     141 </span>            :         { &quot;display-align&quot;, TAG_SVG_ATT_display_align, SVG_DisplayAlign_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     142 </span>            :         { &quot;line-increment&quot;, TAG_SVG_ATT_line_increment, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     143 </span>            :         { &quot;stop-color&quot;, TAG_SVG_ATT_stop_color, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     144 </span>            :         { &quot;stop-opacity&quot;, TAG_SVG_ATT_stop_opacity, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     145 </span>            :         { &quot;font-family&quot;, TAG_SVG_ATT_font_family, SVG_FontFamily_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     146 </span>            :         { &quot;font-size&quot;, TAG_SVG_ATT_font_size, SVG_FontSize_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     147 </span>            :         { &quot;font-style&quot;, TAG_SVG_ATT_font_style, SVG_FontStyle_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     148 </span>            :         { &quot;font-variant&quot;, TAG_SVG_ATT_font_variant, SVG_FontVariant_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     149 </span>            :         { &quot;font-weight&quot;, TAG_SVG_ATT_font_weight, SVG_FontWeight_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     150 </span>            :         { &quot;text-anchor&quot;, TAG_SVG_ATT_text_anchor, SVG_TextAnchor_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     151 </span>            :         { &quot;text-align&quot;, TAG_SVG_ATT_text_align, SVG_TextAlign_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     152 </span>            :         { &quot;text-decoration&quot;, TAG_SVG_ATT_text_decoration, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     153 </span>            :         { &quot;focusHighlight&quot;, TAG_SVG_ATT_focusHighlight, SVG_FocusHighlight_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     154 </span>            :         { &quot;externalResourcesRequired&quot;, TAG_SVG_ATT_externalResourcesRequired, SVG_Boolean_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     155 </span>            :         { &quot;focusable&quot;, TAG_SVG_ATT_focusable, SVG_Focusable_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     156 </span>            :         { &quot;nav-next&quot;, TAG_SVG_ATT_nav_next, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     157 </span>            :         { &quot;nav-prev&quot;, TAG_SVG_ATT_nav_prev, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     158 </span>            :         { &quot;nav-up&quot;, TAG_SVG_ATT_nav_up, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     159 </span>            :         { &quot;nav-up-right&quot;, TAG_SVG_ATT_nav_up_right, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     160 </span>            :         { &quot;nav-right&quot;, TAG_SVG_ATT_nav_right, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     161 </span>            :         { &quot;nav-down-right&quot;, TAG_SVG_ATT_nav_down_right, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     162 </span>            :         { &quot;nav-down&quot;, TAG_SVG_ATT_nav_down, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     163 </span>            :         { &quot;nav-down-left&quot;, TAG_SVG_ATT_nav_down_left, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     164 </span>            :         { &quot;nav-left&quot;, TAG_SVG_ATT_nav_left, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     165 </span>            :         { &quot;nav-up-left&quot;, TAG_SVG_ATT_nav_up_left, SVG_Focus_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     166 </span>            :         { &quot;transform&quot;, TAG_SVG_ATT_transform, SVG_Transform_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     167 </span>            :         { &quot;target&quot;, TAG_SVG_ATT_target, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     168 </span>            :         { &quot;attributeName&quot;, TAG_SVG_ATT_attributeName, SMIL_AttributeName_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     169 </span>            :         { &quot;attributeType&quot;, TAG_SVG_ATT_attributeType, SMIL_AttributeType_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     170 </span>            :         { &quot;begin&quot;, TAG_SVG_ATT_begin, SMIL_Times_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     171 </span>            :         { &quot;dur&quot;, TAG_SVG_ATT_dur, SMIL_Duration_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     172 </span>            :         { &quot;end&quot;, TAG_SVG_ATT_end, SMIL_Times_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     173 </span>            :         { &quot;repeatCount&quot;, TAG_SVG_ATT_repeatCount, SMIL_RepeatCount_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     174 </span>            :         { &quot;repeatDur&quot;, TAG_SVG_ATT_repeatDur, SMIL_Duration_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     175 </span>            :         { &quot;restart&quot;, TAG_SVG_ATT_restart, SMIL_Restart_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     176 </span>            :         { &quot;min&quot;, TAG_SVG_ATT_min, SMIL_Duration_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     177 </span>            :         { &quot;max&quot;, TAG_SVG_ATT_max, SMIL_Duration_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     178 </span>            :         { &quot;to&quot;, TAG_SVG_ATT_to, SMIL_AnimateValue_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     179 </span>            :         { &quot;calcMode&quot;, TAG_SVG_ATT_calcMode, SMIL_CalcMode_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     180 </span>            :         { &quot;values&quot;, TAG_SVG_ATT_values, SMIL_AnimateValues_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     181 </span>            :         { &quot;keyTimes&quot;, TAG_SVG_ATT_keyTimes, SMIL_KeyTimes_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     182 </span>            :         { &quot;keySplines&quot;, TAG_SVG_ATT_keySplines, SMIL_KeySplines_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     183 </span>            :         { &quot;from&quot;, TAG_SVG_ATT_from, SMIL_AnimateValue_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     184 </span>            :         { &quot;by&quot;, TAG_SVG_ATT_by, SMIL_AnimateValue_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     185 </span>            :         { &quot;additive&quot;, TAG_SVG_ATT_additive, SMIL_Additive_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     186 </span>            :         { &quot;accumulate&quot;, TAG_SVG_ATT_accumulate, SMIL_Accumulate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     187 </span>            :         { &quot;path&quot;, TAG_SVG_ATT_path, SVG_PathData_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     188 </span>            :         { &quot;keyPoints&quot;, TAG_SVG_ATT_keyPoints, SMIL_KeyPoints_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     189 </span>            :         { &quot;origin&quot;, TAG_SVG_ATT_origin, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     190 </span>            :         { &quot;clipBegin&quot;, TAG_SVG_ATT_clipBegin, SVG_Clock_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     191 </span>            :         { &quot;clipEnd&quot;, TAG_SVG_ATT_clipEnd, SVG_Clock_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     192 </span>            :         { &quot;syncBehavior&quot;, TAG_SVG_ATT_syncBehavior, SMIL_SyncBehavior_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     193 </span>            :         { &quot;syncTolerance&quot;, TAG_SVG_ATT_syncTolerance, SMIL_SyncTolerance_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     194 </span>            :         { &quot;syncMaster&quot;, TAG_SVG_ATT_syncMaster, SVG_Boolean_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     195 </span>            :         { &quot;syncReference&quot;, TAG_SVG_ATT_syncReference, XMLRI_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     196 </span>            :         { &quot;width&quot;, TAG_SVG_ATT_width, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     197 </span>            :         { &quot;height&quot;, TAG_SVG_ATT_height, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     198 </span>            :         { &quot;preserveAspectRatio&quot;, TAG_SVG_ATT_preserveAspectRatio, SVG_PreserveAspectRatio_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     199 </span>            :         { &quot;initialVisibility&quot;, TAG_SVG_ATT_initialVisibility, SVG_InitialVisibility_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     200 </span>            :         { &quot;cx&quot;, TAG_SVG_ATT_cx, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     201 </span>            :         { &quot;cy&quot;, TAG_SVG_ATT_cy, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     202 </span>            :         { &quot;r&quot;, TAG_SVG_ATT_r, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     203 </span>            :         { &quot;rx&quot;, TAG_SVG_ATT_rx, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     204 </span>            :         { &quot;ry&quot;, TAG_SVG_ATT_ry, SVG_Length_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     205 </span>            :         { &quot;horiz-adv-x&quot;, TAG_SVG_ATT_horiz_adv_x, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     206 </span>            :         { &quot;horiz-origin-x&quot;, TAG_SVG_ATT_horiz_origin_x, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     207 </span>            :         { &quot;font-stretch&quot;, TAG_SVG_ATT_font_stretch, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     208 </span>            :         { &quot;unicode-range&quot;, TAG_SVG_ATT_unicode_range, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     209 </span>            :         { &quot;panose-1&quot;, TAG_SVG_ATT_panose_1, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     210 </span>            :         { &quot;widths&quot;, TAG_SVG_ATT_widths, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     211 </span>            :         { &quot;bbox&quot;, TAG_SVG_ATT_bbox, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     212 </span>            :         { &quot;units-per-em&quot;, TAG_SVG_ATT_units_per_em, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     213 </span>            :         { &quot;stemv&quot;, TAG_SVG_ATT_stemv, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     214 </span>            :         { &quot;stemh&quot;, TAG_SVG_ATT_stemh, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     215 </span>            :         { &quot;slope&quot;, TAG_SVG_ATT_slope, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     216 </span>            :         { &quot;cap-height&quot;, TAG_SVG_ATT_cap_height, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     217 </span>            :         { &quot;x-height&quot;, TAG_SVG_ATT_x_height, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     218 </span>            :         { &quot;accent-height&quot;, TAG_SVG_ATT_accent_height, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     219 </span>            :         { &quot;ascent&quot;, TAG_SVG_ATT_ascent, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     220 </span>            :         { &quot;descent&quot;, TAG_SVG_ATT_descent, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     221 </span>            :         { &quot;ideographic&quot;, TAG_SVG_ATT_ideographic, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     222 </span>            :         { &quot;alphabetic&quot;, TAG_SVG_ATT_alphabetic, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     223 </span>            :         { &quot;mathematical&quot;, TAG_SVG_ATT_mathematical, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     224 </span>            :         { &quot;hanging&quot;, TAG_SVG_ATT_hanging, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     225 </span>            :         { &quot;underline-position&quot;, TAG_SVG_ATT_underline_position, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     226 </span>            :         { &quot;underline-thickness&quot;, TAG_SVG_ATT_underline_thickness, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     227 </span>            :         { &quot;strikethrough-position&quot;, TAG_SVG_ATT_strikethrough_position, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     228 </span>            :         { &quot;strikethrough-thickness&quot;, TAG_SVG_ATT_strikethrough_thickness, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     229 </span>            :         { &quot;overline-position&quot;, TAG_SVG_ATT_overline_position, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     230 </span>            :         { &quot;overline-thickness&quot;, TAG_SVG_ATT_overline_thickness, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     231 </span>            :         { &quot;d&quot;, TAG_SVG_ATT_d, SVG_PathData_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     232 </span>            :         { &quot;unicode&quot;, TAG_SVG_ATT_unicode, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     233 </span>            :         { &quot;glyph-name&quot;, TAG_SVG_ATT_glyph_name, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     234 </span>            :         { &quot;arabic-form&quot;, TAG_SVG_ATT_arabic_form, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     235 </span>            :         { &quot;lang&quot;, TAG_SVG_ATT_lang, DOM_StringList_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     236 </span>            :         { &quot;u1&quot;, TAG_SVG_ATT_u1, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     237 </span>            :         { &quot;g1&quot;, TAG_SVG_ATT_g1, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     238 </span>            :         { &quot;u2&quot;, TAG_SVG_ATT_u2, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     239 </span>            :         { &quot;g2&quot;, TAG_SVG_ATT_g2, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     240 </span>            :         { &quot;k&quot;, TAG_SVG_ATT_k, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     241 </span>            :         { &quot;opacity&quot;, TAG_SVG_ATT_opacity, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     242 </span>            :         { &quot;x1&quot;, TAG_SVG_ATT_x1, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     243 </span>            :         { &quot;y1&quot;, TAG_SVG_ATT_y1, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     244 </span>            :         { &quot;x2&quot;, TAG_SVG_ATT_x2, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     245 </span>            :         { &quot;y2&quot;, TAG_SVG_ATT_y2, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     246 </span>            :         { &quot;gradientUnits&quot;, TAG_SVG_ATT_gradientUnits, SVG_GradientUnit_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     247 </span>            :         { &quot;filterUnits&quot;, TAG_SVG_ATT_filterUnits, SVG_GradientUnit_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     248 </span>            :         { &quot;spreadMethod&quot;, TAG_SVG_ATT_spreadMethod, SVG_SpreadMethod_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     249 </span>            :         { &quot;gradientTransform&quot;, TAG_SVG_ATT_gradientTransform, SVG_Transform_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     250 </span>            :         { &quot;pathLength&quot;, TAG_SVG_ATT_pathLength, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     251 </span>            :         { &quot;points&quot;, TAG_SVG_ATT_points, SVG_Points_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     252 </span>            :         { &quot;mediaSize&quot;, TAG_SVG_ATT_mediaSize, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     253 </span>            :         { &quot;mediaTime&quot;, TAG_SVG_ATT_mediaTime, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     254 </span>            :         { &quot;mediaCharacterEncoding&quot;, TAG_SVG_ATT_mediaCharacterEncoding, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     255 </span>            :         { &quot;mediaContentEncodings&quot;, TAG_SVG_ATT_mediaContentEncodings, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     256 </span>            :         { &quot;bandwidth&quot;, TAG_SVG_ATT_bandwidth, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     257 </span>            :         { &quot;fx&quot;, TAG_SVG_ATT_fx, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     258 </span>            :         { &quot;fy&quot;, TAG_SVG_ATT_fy, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     259 </span>            :         { &quot;size&quot;, TAG_SVG_ATT_size, LASeR_Size_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     260 </span>            :         { &quot;choice&quot;, TAG_SVG_ATT_choice, LASeR_Choice_datatype, 0, GF_XMLNS_LASER },
<span class="lineNum">     261 </span>            :         { &quot;delta&quot;, TAG_SVG_ATT_delta, LASeR_Size_datatype, 0, GF_XMLNS_LASER },
<span class="lineNum">     262 </span>            :         { &quot;offset&quot;, TAG_SVG_ATT_offset, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     263 </span>            :         { &quot;syncBehaviorDefault&quot;, TAG_SVG_ATT_syncBehaviorDefault, SMIL_SyncBehavior_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     264 </span>            :         { &quot;syncToleranceDefault&quot;, TAG_SVG_ATT_syncToleranceDefault, SMIL_SyncTolerance_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     265 </span>            :         { &quot;viewBox&quot;, TAG_SVG_ATT_viewBox, SVG_ViewBox_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     266 </span>            :         { &quot;zoomAndPan&quot;, TAG_SVG_ATT_zoomAndPan, SVG_ZoomAndPan_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     267 </span>            :         { &quot;version&quot;, TAG_SVG_ATT_version, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     268 </span>            :         { &quot;baseProfile&quot;, TAG_SVG_ATT_baseProfile, DOM_String_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     269 </span>            :         { &quot;snapshotTime&quot;, TAG_SVG_ATT_snapshotTime, SVG_Clock_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     270 </span>            :         { &quot;timelineBegin&quot;, TAG_SVG_ATT_timelineBegin, SVG_TimelineBegin_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     271 </span>            :         { &quot;playbackOrder&quot;, TAG_SVG_ATT_playbackOrder, SVG_PlaybackOrder_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     272 </span>            :         { &quot;editable&quot;, TAG_SVG_ATT_editable, SVG_Boolean_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     273 </span>            :         { &quot;transformBehavior&quot;, TAG_SVG_ATT_transformBehavior, SVG_TransformBehavior_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     274 </span>            :         { &quot;overlay&quot;, TAG_SVG_ATT_overlay, SVG_Overlay_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     275 </span>            :         { &quot;fullscreen&quot;, TAG_SVG_ATT_fullscreen, SVG_Boolean_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     276 </span>            :         { &quot;motionTransform&quot;, TAG_SVG_ATT_motionTransform, SVG_Motion_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     277 </span>            :         /*SMIL anim fill*/
<span class="lineNum">     278 </span>            :         { &quot;fill&quot;, TAG_SVG_ATT_smil_fill, SMIL_Fill_datatype, GF_SVG_ATTOPT_SMIL, GF_XMLNS_SVG },
<span class="lineNum">     279 </span>            :         /*regular paint fill*/
<span class="lineNum">     280 </span>            :         { &quot;fill&quot;, TAG_SVG_ATT_fill, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     281 </span>            :         /*filter*/
<span class="lineNum">     282 </span>            :         { &quot;filter&quot;, TAG_SVG_ATT_filter, SVG_Paint_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     283 </span>            :         /*text rotate*/
<span class="lineNum">     284 </span>            :         { &quot;rotate&quot;, TAG_SVG_ATT_text_rotate, SVG_Numbers_datatype, GF_SVG_ATTOPT_TEXT, GF_XMLNS_SVG },
<span class="lineNum">     285 </span>            :         /*regular matrix rotate*/
<span class="lineNum">     286 </span>            :         { &quot;rotate&quot;, TAG_SVG_ATT_rotate, SVG_Rotate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     287 </span>            :         /*SMIL anim type*/
<span class="lineNum">     288 </span>            :         { &quot;type&quot;, TAG_SVG_ATT_transform_type, SVG_TransformType_datatype, GF_SVG_ATTOPT_SMIL, GF_XMLNS_SVG },
<span class="lineNum">     289 </span>            :         /*Filter componentTransfer type*/
<span class="lineNum">     290 </span>            :         { &quot;type&quot;, TAG_SVG_ATT_filter_transfer_type, SVG_Filter_TransferType_datatype, GF_SVG_ATTOPT_FILTER, GF_XMLNS_SVG },
<span class="lineNum">     291 </span>            :         /*regular content type*/
<span class="lineNum">     292 </span>            :         { &quot;type&quot;, TAG_SVG_ATT_type, SVG_ContentType_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     293 </span>            :         /*text x*/
<span class="lineNum">     294 </span>            :         { &quot;x&quot;, TAG_SVG_ATT_text_x, SVG_Coordinates_datatype, GF_SVG_ATTOPT_TEXT, GF_XMLNS_SVG },
<span class="lineNum">     295 </span>            :         /*regular x position*/
<span class="lineNum">     296 </span>            :         { &quot;x&quot;, TAG_SVG_ATT_x, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     297 </span>            :         /*text y*/
<span class="lineNum">     298 </span>            :         { &quot;y&quot;, TAG_SVG_ATT_text_y, SVG_Coordinates_datatype, GF_SVG_ATTOPT_TEXT, GF_XMLNS_SVG },
<span class="lineNum">     299 </span>            :         /*regular y position*/
<span class="lineNum">     300 </span>            :         { &quot;y&quot;, TAG_SVG_ATT_y, SVG_Coordinate_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     301 </span>            : 
<span class="lineNum">     302 </span>            :         /*filters*/
<span class="lineNum">     303 </span>            :         { &quot;tableValues&quot;, TAG_SVG_ATT_filter_table_values, SVG_Numbers_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     304 </span>            :         { &quot;intercept&quot;, TAG_SVG_ATT_filter_intercept, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     305 </span>            :         { &quot;amplitude&quot;, TAG_SVG_ATT_filter_amplitude, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     306 </span>            :         { &quot;exponent&quot;, TAG_SVG_ATT_filter_exponent, SVG_Number_datatype, 0, GF_XMLNS_SVG },
<span class="lineNum">     307 </span>            : 
<span class="lineNum">     308 </span>            :         /*LASeR*/
<span class="lineNum">     309 </span>            :         { &quot;enabled&quot;, TAG_LSR_ATT_enabled, SVG_Boolean_datatype, 0, GF_XMLNS_LASER },
<span class="lineNum">     310 </span>            :         /*cursor x*/
<span class="lineNum">     311 </span>            :         { &quot;x&quot;, TAG_SVG_ATT_cursorManager_x, SVG_Length_datatype, GF_SVG_ATTOPT_CURSOR, GF_XMLNS_LASER },
<span class="lineNum">     312 </span>            :         /*cursor y*/
<span class="lineNum">     313 </span>            :         { &quot;y&quot;, TAG_SVG_ATT_cursorManager_y, SVG_Length_datatype, GF_SVG_ATTOPT_CURSOR, GF_XMLNS_LASER },
<span class="lineNum">     314 </span>            : 
<span class="lineNum">     315 </span>            :         /*XBL*/
<span class="lineNum">     316 </span>            : #if 0
<span class="lineNum">     317 </span>            :         { &quot;id&quot;, TAG_XBL_ATT_id, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     318 </span>            :         { &quot;extends&quot;, TAG_XBL_ATT_extends, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     319 </span>            :         { &quot;display&quot;, TAG_XBL_ATT_display, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     320 </span>            :         { &quot;inheritstyle&quot;, TAG_XBL_ATT_inheritstyle, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     321 </span>            :         { &quot;includes&quot;, TAG_XBL_ATT_includes, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     322 </span>            :         { &quot;name&quot;, TAG_XBL_ATT_name, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     323 </span>            :         { &quot;implements&quot;, TAG_XBL_ATT_implements, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     324 </span>            :         { &quot;type&quot;, TAG_XBL_ATT_type, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     325 </span>            :         { &quot;readonly&quot;, TAG_XBL_ATT_readonly, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     326 </span>            :         { &quot;onget&quot;, TAG_XBL_ATT_onget, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     327 </span>            :         { &quot;onset&quot;, TAG_XBL_ATT_onset, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     328 </span>            :         { &quot;event&quot;, TAG_XBL_ATT_event, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     329 </span>            :         { &quot;action&quot;, TAG_XBL_ATT_action, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     330 </span>            :         { &quot;phase&quot;, TAG_XBL_ATT_phase, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     331 </span>            :         { &quot;button&quot;, TAG_XBL_ATT_button, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     332 </span>            :         { &quot;modifiers&quot;, TAG_XBL_ATT_modifiers, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     333 </span>            :         { &quot;keycode&quot;, TAG_XBL_ATT_keycode, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     334 </span>            :         { &quot;key&quot;, TAG_XBL_ATT_key, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     335 </span>            :         { &quot;charcode&quot;, TAG_XBL_ATT_charcode, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     336 </span>            :         { &quot;clickcount&quot;, TAG_XBL_ATT_clickcount, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     337 </span>            :         { &quot;command&quot;, TAG_XBL_ATT_command, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     338 </span>            :         { &quot;preventdefault&quot;, TAG_XBL_ATT_preventdefault, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     339 </span>            :         { &quot;src&quot;, TAG_XBL_ATT_src, DOM_String_datatype, 0, GF_XMLNS_XBL },
<span class="lineNum">     340 </span>            : #endif
<span class="lineNum">     341 </span>            :         /*GPAC SVG Extensions*/
<span class="lineNum">     342 </span>            :         { &quot;use-as-primary&quot;, TAG_GSVG_ATT_useAsPrimary, SVG_Boolean_datatype, 0, GF_XMLNS_SVG_GPAC_EXTENSION},
<span class="lineNum">     343 </span>            :         { &quot;depthOffset&quot;, TAG_GSVG_ATT_depthOffset, SVG_Number_datatype, 0, GF_XMLNS_SVG_GPAC_EXTENSION},
<span class="lineNum">     344 </span>            :         { &quot;depthGain&quot;, TAG_GSVG_ATT_depthGain, SVG_Number_datatype, 0, GF_XMLNS_SVG_GPAC_EXTENSION},
<span class="lineNum">     345 </span>            : 
<a name="346"><span class="lineNum">     346 </span>            : };</a>
<span class="lineNum">     347 </span>            : 
<span class="lineNum">     348 </span><span class="lineCov">        354 : void gf_xml_push_namespaces(GF_DOMNode *elt)</span>
<span class="lineNum">     349 </span>            : {
<span class="lineNum">     350 </span><span class="lineCov">        354 :         GF_DOMAttribute *att = elt-&gt;attributes;</span>
<span class="lineNum">     351 </span><span class="lineCov">       1966 :         while (att) {</span>
<span class="lineNum">     352 </span><span class="lineCov">       1258 :                 if (att-&gt;tag==TAG_DOM_ATT_any) {</span>
<span class="lineNum">     353 </span>            :                         GF_DOMFullAttribute *datt = (GF_DOMFullAttribute*)att;
<span class="lineNum">     354 </span><span class="lineNoCov">          0 :                         if (datt-&gt;name &amp;&amp; !strncmp(datt-&gt;name, &quot;xmlns&quot;, 5)) {</span>
<span class="lineNum">     355 </span>            :                                 char *qname = datt-&gt;name+5;
<span class="lineNum">     356 </span><span class="lineNoCov">          0 :                                 gf_sg_add_namespace(elt-&gt;sgprivate-&gt;scenegraph, *(DOM_String *) datt-&gt;data, qname[0] ? qname+1 : NULL);</span>
<span class="lineNum">     357 </span>            :                         }
<span class="lineNum">     358 </span>            :                 }
<span class="lineNum">     359 </span><span class="lineCov">       1258 :                 att = att-&gt;next;</span>
<span class="lineNum">     360 </span>            :         }
<a name="361"><span class="lineNum">     361 </span><span class="lineCov">        354 : }</span></a>
<span class="lineNum">     362 </span>            : 
<span class="lineNum">     363 </span><span class="lineCov">        168 : void gf_xml_pop_namespaces(GF_DOMNode *elt)</span>
<span class="lineNum">     364 </span>            : {
<span class="lineNum">     365 </span><span class="lineCov">        168 :         GF_DOMAttribute *att = elt-&gt;attributes;</span>
<span class="lineNum">     366 </span><span class="lineCov">       1389 :         while (att) {</span>
<span class="lineNum">     367 </span><span class="lineCov">       1053 :                 if (att-&gt;tag==TAG_DOM_ATT_any) {</span>
<span class="lineNum">     368 </span>            :                         GF_DOMFullAttribute *datt = (GF_DOMFullAttribute*)att;
<span class="lineNum">     369 </span><span class="lineCov">        397 :                         if (datt-&gt;name &amp;&amp; !strncmp(datt-&gt;name, &quot;xmlns&quot;, 5)) {</span>
<span class="lineNum">     370 </span>            :                                 char *qname = datt-&gt;name+5;
<span class="lineNum">     371 </span><span class="lineCov">        198 :                                 gf_sg_remove_namespace(elt-&gt;sgprivate-&gt;scenegraph, *(DOM_String *) datt-&gt;data, qname[0] ? qname+1 : NULL);</span>
<span class="lineNum">     372 </span>            :                         }
<span class="lineNum">     373 </span>            :                 }
<span class="lineNum">     374 </span><span class="lineCov">       1053 :                 att = att-&gt;next;</span>
<span class="lineNum">     375 </span>            :         }
<span class="lineNum">     376 </span><span class="lineCov">        168 : }</span>
<a name="377"><span class="lineNum">     377 </span>            : </a>
<span class="lineNum">     378 </span>            : 
<span class="lineNum">     379 </span><span class="lineNoCov">          0 : static u32 gf_xml_get_namespace(GF_DOMNode *elt, const char *attribute_name)</span>
<span class="lineNum">     380 </span>            : {
<span class="lineNum">     381 </span><span class="lineNoCov">          0 :         GF_DOMAttribute *att = elt-&gt;attributes;</span>
<span class="lineNum">     382 </span><span class="lineNoCov">          0 :         while (att) {</span>
<span class="lineNum">     383 </span><span class="lineNoCov">          0 :                 if (att-&gt;tag==TAG_DOM_ATT_any) {</span>
<span class="lineNum">     384 </span>            :                         GF_DOMFullAttribute *datt = (GF_DOMFullAttribute*)att;
<span class="lineNum">     385 </span><span class="lineNoCov">          0 :                         if (datt-&gt;name &amp;&amp; !strncmp(datt-&gt;name, &quot;xmlns&quot;, 5) &amp;&amp; !strcmp(datt-&gt;name+6, attribute_name)) {</span>
<span class="lineNum">     386 </span><span class="lineNoCov">          0 :                                 return gf_xml_get_namespace_id(*(DOM_String *)  datt-&gt;data);</span>
<span class="lineNum">     387 </span>            :                         }
<span class="lineNum">     388 </span>            :                 }
<span class="lineNum">     389 </span><span class="lineNoCov">          0 :                 att = att-&gt;next;</span>
<span class="lineNum">     390 </span>            :         }
<span class="lineNum">     391 </span><span class="lineNoCov">          0 :         if (!elt-&gt;sgprivate-&gt;parents) return 0;</span>
<span class="lineNum">     392 </span><span class="lineNoCov">          0 :         return gf_xml_get_namespace((GF_DOMNode*)elt-&gt;sgprivate-&gt;parents-&gt;node, attribute_name);</span>
<a name="393"><span class="lineNum">     393 </span>            : }</a>
<span class="lineNum">     394 </span>            : 
<span class="lineNum">     395 </span><span class="lineCov">        148 : static char *gf_xml_get_namespace_qname(GF_DOMNode *elt, u32 ns)</span>
<span class="lineNum">     396 </span>            : {
<span class="lineNum">     397 </span><span class="lineCov">        344 :         GF_DOMAttribute *att = elt-&gt;attributes;</span>
<span class="lineNum">     398 </span><span class="lineCov">       3148 :         while (att) {</span>
<span class="lineNum">     399 </span><span class="lineCov">       2804 :                 if (att-&gt;tag==TAG_DOM_ATT_any) {</span>
<span class="lineNum">     400 </span>            :                         GF_DOMFullAttribute *datt = (GF_DOMFullAttribute*)att;
<span class="lineNum">     401 </span><span class="lineNoCov">          0 :                         if (datt-&gt;name &amp;&amp; !strncmp(datt-&gt;name, &quot;xmlns&quot;, 5) &amp;&amp; (gf_xml_get_namespace_id(*(DOM_String *)  datt-&gt;data)==ns)) {</span>
<span class="lineNum">     402 </span><span class="lineNoCov">          0 :                                 if (datt-&gt;name[5]) return datt-&gt;name+6;</span>
<span class="lineNum">     403 </span>            :                                 return NULL;
<span class="lineNum">     404 </span>            :                         }
<span class="lineNum">     405 </span>            :                 }
<span class="lineNum">     406 </span><span class="lineCov">       2804 :                 att = att-&gt;next;</span>
<span class="lineNum">     407 </span>            :         }
<span class="lineNum">     408 </span><span class="lineCov">        344 :         if (!elt-&gt;sgprivate-&gt;parents) return NULL;</span>
<span class="lineNum">     409 </span><span class="lineCov">        196 :         return gf_xml_get_namespace_qname((GF_DOMNode*)elt-&gt;sgprivate-&gt;parents-&gt;node, ns);</span>
<a name="410"><span class="lineNum">     410 </span>            : }</a>
<span class="lineNum">     411 </span>            : 
<span class="lineNum">     412 </span><span class="lineCov">      10295 : u32 gf_xml_get_attribute_tag(GF_Node *elt, char *attribute_name, GF_NamespaceType ns)</span>
<span class="lineNum">     413 </span>            : {
<span class="lineNum">     414 </span>            :         u32 i, count;
<span class="lineNum">     415 </span>            :         count = sizeof(xml_attributes) / sizeof(struct xml_att_def);
<span class="lineNum">     416 </span>            : 
<span class="lineNum">     417 </span><span class="lineCov">      10295 :         if (!ns) {</span>
<span class="lineNum">     418 </span><span class="lineCov">         67 :                 char *ns_sep = strchr(attribute_name, ':');</span>
<span class="lineNum">     419 </span><span class="lineCov">         67 :                 if (ns_sep) {</span>
<span class="lineNum">     420 </span><span class="lineNoCov">          0 :                         ns_sep[0] = 0;</span>
<span class="lineNum">     421 </span><span class="lineNoCov">          0 :                         ns = gf_sg_get_namespace_code(elt-&gt;sgprivate-&gt;scenegraph, attribute_name);</span>
<span class="lineNum">     422 </span><span class="lineNoCov">          0 :                         if (ns==GF_XMLNS_UNDEFINED) ns = gf_xml_get_namespace((GF_DOMNode*)elt, attribute_name);</span>
<span class="lineNum">     423 </span><span class="lineNoCov">          0 :                         ns_sep[0] = ':';</span>
<span class="lineNum">     424 </span><span class="lineNoCov">          0 :                         attribute_name = ++ns_sep;</span>
<span class="lineNum">     425 </span>            :                 } else {
<span class="lineNum">     426 </span>            :                         ns = gf_xml_get_element_namespace(elt);
<span class="lineNum">     427 </span><span class="lineCov">         67 :                         if (!ns) ns = gf_sg_get_namespace_code(elt-&gt;sgprivate-&gt;scenegraph, NULL);</span>
<span class="lineNum">     428 </span>            :                 }
<span class="lineNum">     429 </span>            :         }
<span class="lineNum">     430 </span>            : 
<span class="lineNum">     431 </span><span class="lineCov">    1108528 :         for (i=0; i&lt;count; i++) {</span>
<span class="lineNum">     432 </span><span class="lineCov">    1107855 :                 if (strcmp(xml_attributes[i].name, attribute_name)) continue;</span>
<span class="lineNum">     433 </span><span class="lineCov">      13651 :                 if (xml_attributes[i].xmlns != ns) continue;</span>
<span class="lineNum">     434 </span>            : 
<span class="lineNum">     435 </span><span class="lineCov">      11458 :                 switch (xml_attributes[i].opts) {</span>
<span class="lineNum">     436 </span><span class="lineCov">       1465 :                 case GF_SVG_ATTOPT_SMIL:</span>
<span class="lineNum">     437 </span><span class="lineCov">       1465 :                         switch (elt-&gt;sgprivate-&gt;tag) {</span>
<span class="lineNum">     438 </span><span class="lineCov">         56 :                         case TAG_SVG_animate:</span>
<span class="lineNum">     439 </span>            :                         case TAG_SVG_animateColor:
<span class="lineNum">     440 </span>            :                         case TAG_SVG_animateMotion:
<span class="lineNum">     441 </span>            :                         case TAG_SVG_animateTransform:
<span class="lineNum">     442 </span>            :                         case TAG_SVG_animation:
<span class="lineNum">     443 </span>            :                         case TAG_SVG_audio:
<span class="lineNum">     444 </span>            :                         case TAG_SVG_video:
<span class="lineNum">     445 </span>            :                         case TAG_SVG_set:
<span class="lineNum">     446 </span><span class="lineCov">         56 :                                 return xml_attributes[i].tag;</span>
<span class="lineNum">     447 </span>            :                         default:
<span class="lineNum">     448 </span>            :                                 break;
<span class="lineNum">     449 </span>            :                         }
<span class="lineNum">     450 </span>            :                         break;
<span class="lineNum">     451 </span><span class="lineCov">       1015 :                 case GF_SVG_ATTOPT_TEXT:</span>
<span class="lineNum">     452 </span><span class="lineCov">       1015 :                         if (elt-&gt;sgprivate-&gt;tag == TAG_SVG_text)</span>
<span class="lineNum">     453 </span><span class="lineCov">        594 :                                 return xml_attributes[i].tag;</span>
<span class="lineNum">     454 </span>            :                         break;
<span class="lineNum">     455 </span><span class="lineNoCov">          0 :                 case GF_SVG_ATTOPT_CURSOR:</span>
<span class="lineNum">     456 </span><span class="lineNoCov">          0 :                         if (elt-&gt;sgprivate-&gt;tag == TAG_LSR_cursorManager)</span>
<span class="lineNum">     457 </span><span class="lineNoCov">          0 :                                 return xml_attributes[i].tag;</span>
<span class="lineNum">     458 </span>            :                         break;
<span class="lineNum">     459 </span><span class="lineNoCov">          0 :                 case GF_SVG_ATTOPT_LISTENER:</span>
<span class="lineNum">     460 </span><span class="lineNoCov">          0 :                         if (elt-&gt;sgprivate-&gt;tag == TAG_SVG_listener)</span>
<span class="lineNum">     461 </span><span class="lineNoCov">          0 :                                 return xml_attributes[i].tag;</span>
<span class="lineNum">     462 </span>            :                         break;
<span class="lineNum">     463 </span><span class="lineCov">         12 :                 case GF_SVG_ATTOPT_FILTER:</span>
<span class="lineNum">     464 </span><span class="lineCov">         12 :                         switch (elt-&gt;sgprivate-&gt;tag) {</span>
<span class="lineNum">     465 </span><span class="lineCov">          6 :                         case TAG_SVG_filter:</span>
<span class="lineNum">     466 </span>            :                         case TAG_SVG_feDistantLight:
<span class="lineNum">     467 </span>            :                         case TAG_SVG_fePointLight:
<span class="lineNum">     468 </span>            :                         case TAG_SVG_feSpotLight:
<span class="lineNum">     469 </span>            :                         case TAG_SVG_feBlend:
<span class="lineNum">     470 </span>            :                         case TAG_SVG_feColorMatrix:
<span class="lineNum">     471 </span>            :                         case TAG_SVG_feComponentTransfer:
<span class="lineNum">     472 </span>            :                         case TAG_SVG_feFuncR:
<span class="lineNum">     473 </span>            :                         case TAG_SVG_feFuncG:
<span class="lineNum">     474 </span>            :                         case TAG_SVG_feFuncB:
<span class="lineNum">     475 </span>            :                         case TAG_SVG_feFuncA:
<span class="lineNum">     476 </span>            :                         case TAG_SVG_feComposite:
<span class="lineNum">     477 </span>            :                         case TAG_SVG_feConvolveMatrix:
<span class="lineNum">     478 </span>            :                         case TAG_SVG_feDiffuseLighting:
<span class="lineNum">     479 </span>            :                         case TAG_SVG_feDisplacementMap:
<span class="lineNum">     480 </span>            :                         case TAG_SVG_feFlood:
<span class="lineNum">     481 </span>            :                         case TAG_SVG_feGaussianBlur:
<span class="lineNum">     482 </span>            :                         case TAG_SVG_feImage:
<span class="lineNum">     483 </span>            :                         case TAG_SVG_feMerge:
<span class="lineNum">     484 </span>            :                         case TAG_SVG_feMorphology:
<span class="lineNum">     485 </span>            :                         case TAG_SVG_feOffset:
<span class="lineNum">     486 </span>            :                         case TAG_SVG_feSpecularLighting:
<span class="lineNum">     487 </span>            :                         case TAG_SVG_feTile:
<span class="lineNum">     488 </span>            :                         case TAG_SVG_feTurbulence:
<span class="lineNum">     489 </span><span class="lineCov">          6 :                                 return xml_attributes[i].tag;</span>
<span class="lineNum">     490 </span>            :                         default:
<span class="lineNum">     491 </span>            :                                 break;
<span class="lineNum">     492 </span>            :                         }
<span class="lineNum">     493 </span>            :                         break;
<span class="lineNum">     494 </span><span class="lineCov">       8966 :                 default:</span>
<span class="lineNum">     495 </span><span class="lineCov">       8966 :                         return xml_attributes[i].tag;</span>
<span class="lineNum">     496 </span>            :                 }
<span class="lineNum">     497 </span>            :         }
<span class="lineNum">     498 </span>            :         return TAG_DOM_ATT_any;
<a name="499"><span class="lineNum">     499 </span>            : }</a>
<span class="lineNum">     500 </span>            : 
<span class="lineNum">     501 </span><span class="lineCov">        182 : u32 gf_xml_get_attribute_type(u32 tag)</span>
<span class="lineNum">     502 </span>            : {
<span class="lineNum">     503 </span>            :         u32 i, count;
<span class="lineNum">     504 </span>            :         count = sizeof(xml_attributes) / sizeof(struct xml_att_def);
<span class="lineNum">     505 </span><span class="lineCov">    1177352 :         for (i=0; i&lt;count; i++) {</span>
<span class="lineNum">     506 </span><span class="lineCov">    1189608 :                 if (xml_attributes[i].tag==tag) return xml_attributes[i].type;</span>
<span class="lineNum">     507 </span>            :         }
<span class="lineNum">     508 </span>            :         return DOM_String_datatype;
<a name="509"><span class="lineNum">     509 </span>            : }</a>
<span class="lineNum">     510 </span>            : 
<span class="lineNum">     511 </span><span class="lineCov">       1386 : const char*gf_svg_get_attribute_name(GF_Node *node, u32 tag)</span>
<span class="lineNum">     512 </span>            : {
<span class="lineNum">     513 </span>            :         u32 i, count, ns;
<span class="lineNum">     514 </span>            : 
<span class="lineNum">     515 </span>            :         //ns = gf_sg_get_namespace_code(node-&gt;sgprivate-&gt;scenegraph, NULL);
<span class="lineNum">     516 </span>            :         ns = gf_xml_get_element_namespace(node);
<span class="lineNum">     517 </span>            :         count = sizeof(xml_attributes) / sizeof(struct xml_att_def);
<span class="lineNum">     518 </span><span class="lineCov">     131258 :         for (i=0; i&lt;count; i++) {</span>
<span class="lineNum">     519 </span><span class="lineCov">     131258 :                 if (xml_attributes[i].tag==tag) {</span>
<span class="lineNum">     520 </span>            :                         char *xmlns;
<span class="lineNum">     521 </span><span class="lineCov">       1386 :                         if (ns == xml_attributes[i].xmlns)</span>
<span class="lineNum">     522 </span><span class="lineCov">       1238 :                                 return xml_attributes[i].name;</span>
<span class="lineNum">     523 </span>            : 
<span class="lineNum">     524 </span><span class="lineCov">        148 :                         xmlns = (char *) gf_xml_get_namespace_qname((GF_DOMNode*)node, xml_attributes[i].xmlns);</span>
<span class="lineNum">     525 </span><span class="lineCov">        148 :                         if (xmlns) {</span>
<span class="lineNum">     526 </span><span class="lineNoCov">          0 :                                 sprintf(node-&gt;sgprivate-&gt;scenegraph-&gt;szNameBuffer, &quot;%s:%s&quot;, xmlns, xml_attributes[i].name);</span>
<span class="lineNum">     527 </span><span class="lineNoCov">          0 :                                 return node-&gt;sgprivate-&gt;scenegraph-&gt;szNameBuffer;</span>
<span class="lineNum">     528 </span>            :                         }
<span class="lineNum">     529 </span><span class="lineCov">        148 :                         return xml_attributes[i].name;</span>
<span class="lineNum">     530 </span>            :                 }
<span class="lineNum">     531 </span>            :         }
<a name="532"><span class="lineNum">     532 </span>            :         return 0;</a>
<span class="lineNum">     533 </span>            : }
<span class="lineNum">     534 </span><span class="lineNoCov">          0 : GF_DOMAttribute *gf_xml_create_attribute(GF_Node *node, u32 tag)</span>
<span class="lineNum">     535 </span>            : {
<span class="lineNum">     536 </span>            :         u32 type = gf_xml_get_attribute_type(tag);
<span class="lineNum">     537 </span><span class="lineCov">      12260 :         return gf_node_create_attribute_from_datatype(type, tag);</span>
<span class="lineNum">     538 </span>            : }
<span class="lineNum">     539 </span>            : 
<span class="lineNum">     540 </span>            : static const struct xml_elt_def {
<span class="lineNum">     541 </span>            :         const char *name;
<span class="lineNum">     542 </span>            :         u32 tag;
<span class="lineNum">     543 </span>            :         u32 xmlns;
<span class="lineNum">     544 </span>            : } xml_elements [] =
<span class="lineNum">     545 </span>            : {
<span class="lineNum">     546 </span>            :         { &quot;listener&quot;, TAG_SVG_listener, GF_XMLNS_XMLEV},
<span class="lineNum">     547 </span>            :         /*SVG*/
<span class="lineNum">     548 </span>            :         { &quot;a&quot;, TAG_SVG_a, GF_XMLNS_SVG },
<span class="lineNum">     549 </span>            :         { &quot;animate&quot;, TAG_SVG_animate, GF_XMLNS_SVG },
<span class="lineNum">     550 </span>            :         { &quot;animateColor&quot;, TAG_SVG_animateColor, GF_XMLNS_SVG },
<span class="lineNum">     551 </span>            :         { &quot;animateMotion&quot;, TAG_SVG_animateMotion, GF_XMLNS_SVG },
<span class="lineNum">     552 </span>            :         { &quot;animateTransform&quot;, TAG_SVG_animateTransform, GF_XMLNS_SVG },
<span class="lineNum">     553 </span>            :         { &quot;animation&quot;, TAG_SVG_animation, GF_XMLNS_SVG },
<span class="lineNum">     554 </span>            :         { &quot;audio&quot;, TAG_SVG_audio, GF_XMLNS_SVG },
<span class="lineNum">     555 </span>            :         { &quot;circle&quot;, TAG_SVG_circle, GF_XMLNS_SVG },
<span class="lineNum">     556 </span>            :         { &quot;defs&quot;, TAG_SVG_defs, GF_XMLNS_SVG },
<span class="lineNum">     557 </span>            :         { &quot;desc&quot;, TAG_SVG_desc, GF_XMLNS_SVG },
<span class="lineNum">     558 </span>            :         { &quot;discard&quot;, TAG_SVG_discard, GF_XMLNS_SVG },
<span class="lineNum">     559 </span>            :         { &quot;ellipse&quot;, TAG_SVG_ellipse, GF_XMLNS_SVG },
<span class="lineNum">     560 </span>            :         { &quot;font&quot;, TAG_SVG_font, GF_XMLNS_SVG },
<span class="lineNum">     561 </span>            :         { &quot;font-face&quot;, TAG_SVG_font_face, GF_XMLNS_SVG },
<span class="lineNum">     562 </span>            :         { &quot;font-face-src&quot;, TAG_SVG_font_face_src, GF_XMLNS_SVG },
<span class="lineNum">     563 </span>            :         { &quot;font-face-uri&quot;, TAG_SVG_font_face_uri, GF_XMLNS_SVG },
<span class="lineNum">     564 </span>            :         { &quot;foreignObject&quot;, TAG_SVG_foreignObject, GF_XMLNS_SVG },
<span class="lineNum">     565 </span>            :         { &quot;g&quot;, TAG_SVG_g, GF_XMLNS_SVG },
<span class="lineNum">     566 </span>            :         { &quot;glyph&quot;, TAG_SVG_glyph, GF_XMLNS_SVG },
<span class="lineNum">     567 </span>            :         { &quot;handler&quot;, TAG_SVG_handler, GF_XMLNS_SVG },
<span class="lineNum">     568 </span>            :         { &quot;hkern&quot;, TAG_SVG_hkern, GF_XMLNS_SVG },
<span class="lineNum">     569 </span>            :         { &quot;image&quot;, TAG_SVG_image, GF_XMLNS_SVG },
<span class="lineNum">     570 </span>            :         { &quot;line&quot;, TAG_SVG_line, GF_XMLNS_SVG },
<span class="lineNum">     571 </span>            :         { &quot;linearGradient&quot;, TAG_SVG_linearGradient, GF_XMLNS_SVG },
<span class="lineNum">     572 </span>            :         { &quot;metadata&quot;, TAG_SVG_metadata, GF_XMLNS_SVG },
<span class="lineNum">     573 </span>            :         { &quot;missing-glyph&quot;, TAG_SVG_missing_glyph, GF_XMLNS_SVG },
<span class="lineNum">     574 </span>            :         { &quot;mpath&quot;, TAG_SVG_mpath, GF_XMLNS_SVG },
<span class="lineNum">     575 </span>            :         { &quot;path&quot;, TAG_SVG_path, GF_XMLNS_SVG },
<span class="lineNum">     576 </span>            :         { &quot;polygon&quot;, TAG_SVG_polygon, GF_XMLNS_SVG },
<span class="lineNum">     577 </span>            :         { &quot;polyline&quot;, TAG_SVG_polyline, GF_XMLNS_SVG },
<span class="lineNum">     578 </span>            :         { &quot;prefetch&quot;, TAG_SVG_prefetch, GF_XMLNS_SVG },
<span class="lineNum">     579 </span>            :         { &quot;radialGradient&quot;, TAG_SVG_radialGradient, GF_XMLNS_SVG },
<span class="lineNum">     580 </span>            :         { &quot;rect&quot;, TAG_SVG_rect, GF_XMLNS_SVG },
<span class="lineNum">     581 </span>            :         { &quot;script&quot;, TAG_SVG_script, GF_XMLNS_SVG },
<span class="lineNum">     582 </span>            :         { &quot;set&quot;, TAG_SVG_set, GF_XMLNS_SVG },
<span class="lineNum">     583 </span>            :         { &quot;solidColor&quot;, TAG_SVG_solidColor, GF_XMLNS_SVG },
<span class="lineNum">     584 </span>            :         { &quot;stop&quot;, TAG_SVG_stop, GF_XMLNS_SVG },
<span class="lineNum">     585 </span>            :         { &quot;svg&quot;, TAG_SVG_svg, GF_XMLNS_SVG },
<span class="lineNum">     586 </span>            :         { &quot;switch&quot;, TAG_SVG_switch, GF_XMLNS_SVG },
<span class="lineNum">     587 </span>            :         { &quot;tbreak&quot;, TAG_SVG_tbreak, GF_XMLNS_SVG },
<span class="lineNum">     588 </span>            :         { &quot;text&quot;, TAG_SVG_text, GF_XMLNS_SVG },
<span class="lineNum">     589 </span>            :         { &quot;textArea&quot;, TAG_SVG_textArea, GF_XMLNS_SVG },
<span class="lineNum">     590 </span>            :         { &quot;title&quot;, TAG_SVG_title, GF_XMLNS_SVG },
<span class="lineNum">     591 </span>            :         { &quot;tspan&quot;, TAG_SVG_tspan, GF_XMLNS_SVG },
<span class="lineNum">     592 </span>            :         { &quot;use&quot;, TAG_SVG_use, GF_XMLNS_SVG },
<span class="lineNum">     593 </span>            :         { &quot;video&quot;, TAG_SVG_video, GF_XMLNS_SVG },
<span class="lineNum">     594 </span>            :         { &quot;filter&quot;, TAG_SVG_filter, GF_XMLNS_SVG },
<span class="lineNum">     595 </span>            :         { &quot;feDistantLight&quot;, TAG_SVG_feDistantLight, GF_XMLNS_SVG },
<span class="lineNum">     596 </span>            :         { &quot;fePointLight&quot;, TAG_SVG_fePointLight, GF_XMLNS_SVG },
<span class="lineNum">     597 </span>            :         { &quot;feSpotLight&quot;, TAG_SVG_feSpotLight, GF_XMLNS_SVG },
<span class="lineNum">     598 </span>            :         { &quot;feBlend&quot;, TAG_SVG_feBlend, GF_XMLNS_SVG },
<span class="lineNum">     599 </span>            :         { &quot;feColorMatrix&quot;, TAG_SVG_feColorMatrix, GF_XMLNS_SVG },
<span class="lineNum">     600 </span>            :         { &quot;feComponentTransfer&quot;, TAG_SVG_feComponentTransfer, GF_XMLNS_SVG },
<span class="lineNum">     601 </span>            :         { &quot;feFuncR&quot;, TAG_SVG_feFuncR, GF_XMLNS_SVG },
<span class="lineNum">     602 </span>            :         { &quot;feFuncG&quot;, TAG_SVG_feFuncG, GF_XMLNS_SVG },
<span class="lineNum">     603 </span>            :         { &quot;feFuncB&quot;, TAG_SVG_feFuncB, GF_XMLNS_SVG },
<span class="lineNum">     604 </span>            :         { &quot;feFuncA&quot;, TAG_SVG_feFuncA, GF_XMLNS_SVG },
<span class="lineNum">     605 </span>            :         { &quot;feComposite&quot;, TAG_SVG_feComposite, GF_XMLNS_SVG },
<span class="lineNum">     606 </span>            :         { &quot;feConvolveMatrix&quot;, TAG_SVG_feConvolveMatrix, GF_XMLNS_SVG },
<span class="lineNum">     607 </span>            :         { &quot;feDiffuseLighting&quot;, TAG_SVG_feDiffuseLighting, GF_XMLNS_SVG },
<span class="lineNum">     608 </span>            :         { &quot;feDisplacementMap&quot;, TAG_SVG_feDisplacementMap, GF_XMLNS_SVG },
<span class="lineNum">     609 </span>            :         { &quot;feFlood&quot;, TAG_SVG_feFlood, GF_XMLNS_SVG },
<span class="lineNum">     610 </span>            :         { &quot;feGaussianBlur&quot;, TAG_SVG_feGaussianBlur, GF_XMLNS_SVG },
<span class="lineNum">     611 </span>            :         { &quot;feImage&quot;, TAG_SVG_feImage, GF_XMLNS_SVG },
<span class="lineNum">     612 </span>            :         { &quot;feMerge&quot;, TAG_SVG_feMerge, GF_XMLNS_SVG },
<span class="lineNum">     613 </span>            :         { &quot;feMorphology&quot;, TAG_SVG_feMorphology, GF_XMLNS_SVG },
<span class="lineNum">     614 </span>            :         { &quot;feOffset&quot;, TAG_SVG_feOffset, GF_XMLNS_SVG },
<span class="lineNum">     615 </span>            :         { &quot;feSpecularLighting&quot;, TAG_SVG_feSpecularLighting, GF_XMLNS_SVG },
<span class="lineNum">     616 </span>            :         { &quot;feTile&quot;, TAG_SVG_feTile, GF_XMLNS_SVG },
<span class="lineNum">     617 </span>            :         { &quot;feTurbulence&quot;, TAG_SVG_feTurbulence, GF_XMLNS_SVG },
<span class="lineNum">     618 </span>            : 
<span class="lineNum">     619 </span>            :         /*LASeR*/
<span class="lineNum">     620 </span>            :         { &quot;conditional&quot;, TAG_LSR_conditional, GF_XMLNS_LASER },
<span class="lineNum">     621 </span>            :         { &quot;rectClip&quot;, TAG_LSR_rectClip, GF_XMLNS_LASER },
<span class="lineNum">     622 </span>            :         { &quot;cursorManager&quot;, TAG_LSR_cursorManager, GF_XMLNS_LASER },
<span class="lineNum">     623 </span>            :         { &quot;selector&quot;, TAG_LSR_selector, GF_XMLNS_LASER },
<span class="lineNum">     624 </span>            :         { &quot;simpleLayout&quot;, TAG_LSR_simpleLayout, GF_XMLNS_LASER },
<span class="lineNum">     625 </span>            :         { &quot;updates&quot;, TAG_LSR_updates, GF_XMLNS_LASER },
<span class="lineNum">     626 </span>            : 
<span class="lineNum">     627 </span>            : };
<a name="628"><span class="lineNum">     628 </span>            : </a>
<span class="lineNum">     629 </span>            : GF_EXPORT
<span class="lineNum">     630 </span><span class="lineCov">       3705 : u32 gf_xml_get_element_tag(const char *element_name, u32 ns)</span>
<span class="lineNum">     631 </span>            : {
<span class="lineNum">     632 </span>            :         u32 i, count;
<span class="lineNum">     633 </span>            : //      if (!element_name) return TAG_UndefinedNode;
<span class="lineNum">     634 </span>            :         count = sizeof(xml_elements) / sizeof(struct xml_elt_def);
<span class="lineNum">     635 </span><span class="lineCov">     108283 :         for (i=0; i&lt;count; i++) {</span>
<span class="lineNum">     636 </span><span class="lineCov">     108145 :                 if (!strcmp(xml_elements[i].name, element_name)) {</span>
<span class="lineNum">     637 </span><span class="lineCov">       3567 :                         if (!ns || (xml_elements[i].xmlns==ns) )</span>
<span class="lineNum">     638 </span><span class="lineCov">       3567 :                                 return xml_elements[i].tag;</span>
<span class="lineNum">     639 </span>            :                 }
<span class="lineNum">     640 </span>            :         }
<span class="lineNum">     641 </span>            :         return TAG_UndefinedNode;
<a name="642"><span class="lineNum">     642 </span>            : }</a>
<span class="lineNum">     643 </span>            : 
<span class="lineNum">     644 </span><span class="lineCov">       4226 : const char *gf_xml_get_element_name(GF_Node *n)</span>
<span class="lineNum">     645 </span>            : {
<span class="lineNum">     646 </span>            :         u32 i, count, ns;
<span class="lineNum">     647 </span>            : 
<span class="lineNum">     648 </span><span class="lineCov">       4226 :         ns = n ? gf_sg_get_namespace_code(n-&gt;sgprivate-&gt;scenegraph, NULL) : 0;</span>
<span class="lineNum">     649 </span>            :         count = sizeof(xml_elements) / sizeof(struct xml_elt_def);
<span class="lineNum">     650 </span><span class="lineCov">     117767 :         for (i=0; i&lt;count; i++) {</span>
<span class="lineNum">     651 </span><span class="lineCov">     117744 :                 if (n &amp;&amp; n-&gt;sgprivate &amp;&amp; (n-&gt;sgprivate-&gt;tag==xml_elements[i].tag)) {</span>
<span class="lineNum">     652 </span>            :                         char *xmlns;
<span class="lineNum">     653 </span><span class="lineCov">       4203 :                         if (ns == xml_elements[i].xmlns)</span>
<span class="lineNum">     654 </span><span class="lineCov">       3666 :                                 return xml_elements[i].name;</span>
<span class="lineNum">     655 </span>            : 
<span class="lineNum">     656 </span><span class="lineCov">        537 :                         xmlns = (char *) gf_sg_get_namespace_qname(n-&gt;sgprivate-&gt;scenegraph, xml_elements[i].xmlns);</span>
<span class="lineNum">     657 </span><span class="lineCov">        537 :                         if (xmlns) {</span>
<span class="lineNum">     658 </span><span class="lineCov">         34 :                                 sprintf(n-&gt;sgprivate-&gt;scenegraph-&gt;szNameBuffer, &quot;%s:%s&quot;, xmlns, xml_elements[i].name);</span>
<span class="lineNum">     659 </span><span class="lineCov">         34 :                                 return n-&gt;sgprivate-&gt;scenegraph-&gt;szNameBuffer;</span>
<span class="lineNum">     660 </span>            :                         }
<span class="lineNum">     661 </span><span class="lineCov">        503 :                         return xml_elements[i].name;</span>
<span class="lineNum">     662 </span>            :                 }
<span class="lineNum">     663 </span>            :         }
<span class="lineNum">     664 </span>            :         return &quot;UndefinedNode&quot;;
<a name="665"><span class="lineNum">     665 </span>            : }</a>
<span class="lineNum">     666 </span>            : 
<span class="lineNum">     667 </span><span class="lineCov">        528 : GF_NamespaceType gf_xml_get_element_namespace(GF_Node *n)</span>
<span class="lineNum">     668 </span>            : {
<span class="lineNum">     669 </span>            :         u32 i, count;
<span class="lineNum">     670 </span><span class="lineCov">       1995 :         if (n-&gt;sgprivate-&gt;tag==TAG_DOMFullNode) {</span>
<span class="lineNum">     671 </span>            :                 GF_DOMFullNode *elt = (GF_DOMFullNode *)n;
<span class="lineNum">     672 </span><span class="lineCov">          5 :                 return elt-&gt;ns;</span>
<span class="lineNum">     673 </span>            :         }
<span class="lineNum">     674 </span>            : 
<span class="lineNum">     675 </span>            :         count = sizeof(xml_elements) / sizeof(struct xml_elt_def);
<span class="lineNum">     676 </span><span class="lineCov">      41338 :         for (i=0; i&lt;count; i++) {</span>
<span class="lineNum">     677 </span><span class="lineCov">      43328 :                 if (n-&gt;sgprivate-&gt;tag==xml_elements[i].tag) return xml_elements[i].xmlns;</span>
<span class="lineNum">     678 </span>            :         }
<span class="lineNum">     679 </span>            :         return GF_XMLNS_UNDEFINED;
<a name="680"><span class="lineNum">     680 </span>            : }</a>
<span class="lineNum">     681 </span>            : 
<span class="lineNum">     682 </span><span class="lineCov">       2807 : u32 gf_node_get_attribute_count(GF_Node *node)</span>
<span class="lineNum">     683 </span>            : {
<span class="lineNum">     684 </span>            :         u32 count = 0;
<span class="lineNum">     685 </span>            :         GF_DOMAttribute *atts;
<span class="lineNum">     686 </span><span class="lineCov">       2807 :         if (!node) return 0;</span>
<span class="lineNum">     687 </span><span class="lineNoCov">          0 :         atts =  ((GF_DOMNode *)node)-&gt;attributes;</span>
<span class="lineNum">     688 </span><span class="lineNoCov">          0 :         while (atts) {</span>
<span class="lineNum">     689 </span><span class="lineNoCov">          0 :                 count++;</span>
<span class="lineNum">     690 </span><span class="lineNoCov">          0 :                 atts = atts-&gt;next;</span>
<span class="lineNum">     691 </span>            :         }
<span class="lineNum">     692 </span>            :         return count;
<a name="693"><span class="lineNum">     693 </span>            : }</a>
<span class="lineNum">     694 </span>            : 
<span class="lineNum">     695 </span><span class="lineCov">          7 : GF_Err gf_node_get_attribute_info(GF_Node *node, GF_FieldInfo *info)</span>
<span class="lineNum">     696 </span>            : {
<span class="lineNum">     697 </span>            :         GF_DOMNode *dom = (GF_DOMNode *)node;
<span class="lineNum">     698 </span><span class="lineCov">          7 :         GF_DOMAttribute *atts = dom-&gt;attributes;</span>
<span class="lineNum">     699 </span><span class="lineCov">         31 :         while (atts) {</span>
<span class="lineNum">     700 </span><span class="lineCov">         24 :                 if (atts-&gt;tag == info-&gt;fieldIndex) {</span>
<span class="lineNum">     701 </span><span class="lineCov">          7 :                         info-&gt;fieldType = atts-&gt;data_type;</span>
<span class="lineNum">     702 </span><span class="lineCov">          7 :                         info-&gt;far_ptr  = atts-&gt;data;</span>
<span class="lineNum">     703 </span><span class="lineCov">          7 :                         return GF_OK;</span>
<span class="lineNum">     704 </span>            :                 }
<span class="lineNum">     705 </span><span class="lineCov">         17 :                 atts = atts-&gt;next;</span>
<span class="lineNum">     706 </span>            :         }
<span class="lineNum">     707 </span><span class="lineNoCov">          0 :         info-&gt;fieldType = 0;</span>
<span class="lineNum">     708 </span><span class="lineNoCov">          0 :         info-&gt;far_ptr  = NULL;</span>
<span class="lineNum">     709 </span><span class="lineNoCov">          0 :         return GF_NOT_SUPPORTED;</span>
<a name="710"><span class="lineNum">     710 </span>            : }</a>
<span class="lineNum">     711 </span>            : 
<span class="lineNum">     712 </span><span class="lineCov">       5467 : void gf_node_delete_attributes(GF_Node *node)</span>
<span class="lineNum">     713 </span>            : {
<span class="lineNum">     714 </span><span class="lineCov">       5467 :         GF_DOMAttribute *att = ((GF_DOMNode*)node)-&gt;attributes;</span>
<span class="lineNum">     715 </span><span class="lineCov">      24207 :         while(att) {</span>
<span class="lineNum">     716 </span>            :                 GF_DOMAttribute *tmp;
<span class="lineNum">     717 </span><span class="lineCov">      13273 :                 gf_svg_delete_attribute_value(att-&gt;data_type, att-&gt;data, node-&gt;sgprivate-&gt;scenegraph);</span>
<span class="lineNum">     718 </span>            :                 tmp = att;
<span class="lineNum">     719 </span><span class="lineCov">      13273 :                 att = att-&gt;next;</span>
<span class="lineNum">     720 </span><span class="lineCov">      13273 :                 if (tmp-&gt;tag==TAG_DOM_ATT_any) {</span>
<span class="lineNum">     721 </span><span class="lineCov">       1013 :                         gf_free( ((GF_DOMFullAttribute*)tmp)-&gt;name);</span>
<span class="lineNum">     722 </span>            :                 }
<span class="lineNum">     723 </span><span class="lineCov">      13273 :                 gf_free(tmp);</span>
<span class="lineNum">     724 </span>            :         }
<a name="725"><span class="lineNum">     725 </span><span class="lineCov">       5467 : }</span></a>
<span class="lineNum">     726 </span>            : 
<span class="lineNum">     727 </span><span class="lineCov">      12260 : SVGAttribute *gf_node_create_attribute_from_datatype(u32 data_type, u32 attribute_tag)</span>
<span class="lineNum">     728 </span>            : {
<span class="lineNum">     729 </span>            :         SVGAttribute *att;
<span class="lineNum">     730 </span><span class="lineCov">      12260 :         if (!data_type) return NULL;</span>
<span class="lineNum">     731 </span>            : 
<span class="lineNum">     732 </span><span class="lineCov">      12260 :         GF_SAFEALLOC(att, SVGAttribute);</span>
<span class="lineNum">     733 </span><span class="lineCov">      12260 :         if (!att) return NULL;</span>
<span class="lineNum">     734 </span><span class="lineCov">      12260 :         att-&gt;data_type = (u16) data_type;</span>
<span class="lineNum">     735 </span><span class="lineCov">      12260 :         att-&gt;tag = (u16) attribute_tag;</span>
<span class="lineNum">     736 </span><span class="lineCov">      12260 :         att-&gt;data = gf_svg_create_attribute_value(att-&gt;data_type);</span>
<span class="lineNum">     737 </span><span class="lineCov">      12260 :         return att;</span>
<span class="lineNum">     738 </span>            : }
<a name="739"><span class="lineNum">     739 </span>            : </a>
<span class="lineNum">     740 </span>            : GF_EXPORT
<span class="lineNum">     741 </span><span class="lineCov">      10233 : GF_Err gf_node_get_attribute_by_name(GF_Node *node, char *name, u32 xmlns_code, Bool create_if_not_found, Bool set_default, GF_FieldInfo *field)</span>
<span class="lineNum">     742 </span>            : {
<span class="lineNum">     743 </span><span class="lineCov">      10233 :         u32 attribute_tag = gf_xml_get_attribute_tag(node, name, xmlns_code);</span>
<span class="lineNum">     744 </span><span class="lineCov">      10233 :         if (attribute_tag == TAG_DOM_ATT_any) {</span>
<span class="lineNum">     745 </span>            :                 u32 len = 0;
<span class="lineNum">     746 </span>            :                 const char *ns = NULL;
<span class="lineNum">     747 </span>            :                 SVGAttribute *last_att = NULL;
<span class="lineNum">     748 </span><span class="lineCov">        673 :                 GF_DOMFullAttribute *att = (GF_DOMFullAttribute *) ((SVG_Element*)node)-&gt;attributes;</span>
<span class="lineNum">     749 </span><span class="lineCov">        673 :                 if (xmlns_code) ns = gf_sg_get_namespace_qname(node-&gt;sgprivate-&gt;scenegraph, xmlns_code);</span>
<span class="lineNum">     750 </span><span class="lineCov">        659 :                 if (ns) len = (u32) strlen(ns);</span>
<span class="lineNum">     751 </span>            : 
<span class="lineNum">     752 </span><span class="lineCov">       4551 :                 while (att) {</span>
<span class="lineNum">     753 </span><span class="lineCov">       3878 :                         if (((u32) att-&gt;tag == TAG_DOM_ATT_any) &amp;&amp;</span>
<span class="lineNum">     754 </span><span class="lineCov">       1896 :                                 ((!ns &amp;&amp; !strcmp(name, att-&gt;name)) || (ns &amp;&amp; !strncmp(att-&gt;name, ns, len) &amp;&amp; !strcmp(att-&gt;name+len+1, name)))</span>
<span class="lineNum">     755 </span>            :                            ) {
<span class="lineNum">     756 </span><span class="lineNoCov">          0 :                                 field-&gt;fieldIndex = att-&gt;tag;</span>
<span class="lineNum">     757 </span><span class="lineNoCov">          0 :                                 field-&gt;fieldType = att-&gt;data_type;</span>
<span class="lineNum">     758 </span><span class="lineNoCov">          0 :                                 field-&gt;far_ptr = att-&gt;data;</span>
<span class="lineNum">     759 </span><span class="lineNoCov">          0 :                                 return GF_OK;</span>
<span class="lineNum">     760 </span>            :                         }
<span class="lineNum">     761 </span>            :                         last_att = (SVGAttribute *) att;
<span class="lineNum">     762 </span><span class="lineCov">       3878 :                         att = (GF_DOMFullAttribute *) att-&gt;next;</span>
<span class="lineNum">     763 </span>            :                 }
<span class="lineNum">     764 </span><span class="lineCov">        673 :                 if (create_if_not_found) {</span>
<span class="lineNum">     765 </span><span class="lineCov">        673 :                         GF_SAFEALLOC(att, GF_DOMFullAttribute);</span>
<span class="lineNum">     766 </span><span class="lineCov">        673 :                         if (!att) return GF_OUT_OF_MEM;</span>
<span class="lineNum">     767 </span><span class="lineCov">        673 :                         att-&gt;data_type = (u16) DOM_String_datatype;</span>
<span class="lineNum">     768 </span><span class="lineCov">        673 :                         att-&gt;tag = (u16) TAG_DOM_ATT_any;</span>
<span class="lineNum">     769 </span><span class="lineCov">        673 :                         att-&gt;data = gf_svg_create_attribute_value(att-&gt;data_type);</span>
<span class="lineNum">     770 </span>            : 
<span class="lineNum">     771 </span><span class="lineCov">        673 :                         att-&gt;name = gf_strdup(name);</span>
<span class="lineNum">     772 </span><span class="lineCov">        673 :                         if (!xmlns_code)</span>
<span class="lineNum">     773 </span><span class="lineCov">         14 :                                 att-&gt;xmlns = gf_xml_get_element_namespace(node);</span>
<span class="lineNum">     774 </span>            :                         else
<span class="lineNum">     775 </span><span class="lineCov">        659 :                                 att-&gt;xmlns = xmlns_code;</span>
<span class="lineNum">     776 </span>            : 
<span class="lineNum">     777 </span><span class="lineCov">        673 :                         if (last_att) last_att-&gt;next = (SVGAttribute *)att;</span>
<span class="lineNum">     778 </span><span class="lineCov">        102 :                         else ((SVG_Element*)node)-&gt;attributes = (SVGAttribute *)att;</span>
<span class="lineNum">     779 </span>            : 
<span class="lineNum">     780 </span><span class="lineCov">        673 :                         field-&gt;far_ptr = att-&gt;data;</span>
<span class="lineNum">     781 </span><span class="lineCov">        673 :                         field-&gt;fieldType = att-&gt;data_type;</span>
<span class="lineNum">     782 </span><span class="lineCov">        673 :                         field-&gt;fieldIndex = att-&gt;tag;</span>
<span class="lineNum">     783 </span><span class="lineCov">        673 :                         return GF_OK;</span>
<span class="lineNum">     784 </span>            :                 }
<span class="lineNum">     785 </span>            :                 return GF_NOT_SUPPORTED;
<span class="lineNum">     786 </span>            :         }
<span class="lineNum">     787 </span><span class="lineCov">       9560 :         return gf_node_get_attribute_by_tag(node, attribute_tag, create_if_not_found, set_default, field);</span>
<span class="lineNum">     788 </span>            : }
<a name="789"><span class="lineNum">     789 </span>            : </a>
<span class="lineNum">     790 </span>            : 
<span class="lineNum">     791 </span><span class="lineCov">        244 : static void attributes_set_default_value(GF_Node *node, SVGAttribute *att)</span>
<span class="lineNum">     792 </span>            : {
<span class="lineNum">     793 </span><span class="lineCov">        244 :         u32 node_tag = node-&gt;sgprivate-&gt;tag;</span>
<span class="lineNum">     794 </span><span class="lineCov">        244 :         switch (att-&gt;tag) {</span>
<span class="lineNum">     795 </span><span class="lineCov">         32 :         case TAG_SVG_ATT_width:</span>
<span class="lineNum">     796 </span>            :         case TAG_SVG_ATT_height:
<span class="lineNum">     797 </span><span class="lineCov">         32 :                 if (node_tag == TAG_SVG_svg) {</span>
<span class="lineNum">     798 </span><span class="lineNoCov">          0 :                         SVG_Length *len = att-&gt;data;</span>
<span class="lineNum">     799 </span><span class="lineNoCov">          0 :                         len-&gt;type = SVG_NUMBER_PERCENTAGE;</span>
<span class="lineNum">     800 </span><span class="lineNoCov">          0 :                         len-&gt;value = INT2FIX(100);</span>
<span class="lineNum">     801 </span>            :                 }
<span class="lineNum">     802 </span>            :                 break;
<span class="lineNum">     803 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_x2:</span>
<span class="lineNum">     804 </span><span class="lineNoCov">          0 :                 if (node_tag == TAG_SVG_linearGradient) {</span>
<span class="lineNum">     805 </span><span class="lineNoCov">          0 :                         ((SVG_Number *)att-&gt;data)-&gt;value = FIX_ONE;</span>
<span class="lineNum">     806 </span>            :                 }
<span class="lineNum">     807 </span>            :                 break;
<span class="lineNum">     808 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_cx:</span>
<span class="lineNum">     809 </span>            :         case TAG_SVG_ATT_cy:
<span class="lineNum">     810 </span>            :         case TAG_SVG_ATT_fx:
<span class="lineNum">     811 </span>            :         case TAG_SVG_ATT_fy:
<span class="lineNum">     812 </span>            :         case TAG_SVG_ATT_r:
<span class="lineNum">     813 </span><span class="lineNoCov">          0 :                 if (node_tag == TAG_SVG_radialGradient) {</span>
<span class="lineNum">     814 </span><span class="lineNoCov">          0 :                         ((SVG_Number *)att-&gt;data)-&gt;value = FIX_ONE/2;</span>
<span class="lineNum">     815 </span>            :                 }
<span class="lineNum">     816 </span>            :                 break;
<span class="lineNum">     817 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_dur:</span>
<span class="lineNum">     818 </span><span class="lineNoCov">          0 :                 if (node_tag == TAG_SVG_video ||</span>
<span class="lineNum">     819 </span><span class="lineNoCov">          0 :                         node_tag == TAG_SVG_audio ||</span>
<span class="lineNum">     820 </span>            :                         node_tag == TAG_SVG_animation)
<span class="lineNum">     821 </span>            :                 {
<span class="lineNum">     822 </span><span class="lineNoCov">          0 :                         ((SMIL_Duration *)att-&gt;data)-&gt;type = SMIL_DURATION_MEDIA;</span>
<span class="lineNum">     823 </span>            :                 } else {
<span class="lineNum">     824 </span>            :                         /*is this correct?*/
<span class="lineNum">     825 </span><span class="lineNoCov">          0 :                         ((SMIL_Duration *)att-&gt;data)-&gt;type = SMIL_DURATION_INDEFINITE;</span>
<span class="lineNum">     826 </span>            :                 }
<span class="lineNum">     827 </span>            :                 break;
<span class="lineNum">     828 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_min:</span>
<span class="lineNum">     829 </span><span class="lineNoCov">          0 :                 ((SMIL_Duration *)att-&gt;data)-&gt;type = SMIL_DURATION_DEFINED;</span>
<span class="lineNum">     830 </span>            :                 break;
<span class="lineNum">     831 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_repeatDur:</span>
<span class="lineNum">     832 </span><span class="lineNoCov">          0 :                 ((SMIL_Duration *)att-&gt;data)-&gt;type = SMIL_DURATION_INDEFINITE;</span>
<span class="lineNum">     833 </span>            :                 break;
<span class="lineNum">     834 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_calcMode:</span>
<span class="lineNum">     835 </span><span class="lineNoCov">          0 :                 if (node_tag == TAG_SVG_animateMotion)</span>
<span class="lineNum">     836 </span><span class="lineNoCov">          0 :                         *((SMIL_CalcMode *)att-&gt;data) = SMIL_CALCMODE_PACED;</span>
<span class="lineNum">     837 </span>            :                 else
<span class="lineNum">     838 </span><span class="lineNoCov">          0 :                         *((SMIL_CalcMode *)att-&gt;data) = SMIL_CALCMODE_LINEAR;</span>
<span class="lineNum">     839 </span>            :                 break;
<span class="lineNum">     840 </span><span class="lineCov">         30 :         case TAG_SVG_ATT_color:</span>
<span class="lineNum">     841 </span><span class="lineCov">         30 :                 ((SVG_Paint *)att-&gt;data)-&gt;type = SVG_PAINT_COLOR;</span>
<span class="lineNum">     842 </span><span class="lineCov">         30 :                 ((SVG_Paint *)att-&gt;data)-&gt;color.type = SVG_COLOR_INHERIT;</span>
<span class="lineNum">     843 </span>            :                 break;
<span class="lineNum">     844 </span><span class="lineCov">          2 :         case TAG_SVG_ATT_solid_color:</span>
<span class="lineNum">     845 </span>            :         case TAG_SVG_ATT_stop_color:
<span class="lineNum">     846 </span><span class="lineCov">          2 :                 ((SVG_Paint *)att-&gt;data)-&gt;type = SVG_PAINT_COLOR;</span>
<span class="lineNum">     847 </span><span class="lineCov">          2 :                 ((SVG_Paint *)att-&gt;data)-&gt;color.type = SVG_COLOR_RGBCOLOR;</span>
<span class="lineNum">     848 </span>            :                 break;
<span class="lineNum">     849 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_opacity:</span>
<span class="lineNum">     850 </span>            :         case TAG_SVG_ATT_solid_opacity:
<span class="lineNum">     851 </span>            :         case TAG_SVG_ATT_stop_opacity:
<span class="lineNum">     852 </span>            :         case TAG_SVG_ATT_audio_level:
<span class="lineNum">     853 </span>            :         case TAG_SVG_ATT_viewport_fill_opacity:
<span class="lineNum">     854 </span><span class="lineNoCov">          0 :                 ((SVG_Number *)att-&gt;data)-&gt;value = FIX_ONE;</span>
<span class="lineNum">     855 </span>            :                 break;
<span class="lineNum">     856 </span><span class="lineCov">          4 :         case TAG_SVG_ATT_display:</span>
<span class="lineNum">     857 </span><span class="lineCov">          4 :                 *((SVG_Display *)att-&gt;data) = SVG_DISPLAY_INLINE;</span>
<span class="lineNum">     858 </span>            :                 break;
<span class="lineNum">     859 </span><span class="lineCov">         18 :         case TAG_SVG_ATT_fill:</span>
<span class="lineNum">     860 </span>            :         case TAG_SVG_ATT_stroke:
<span class="lineNum">     861 </span><span class="lineCov">         18 :                 ((SVG_Paint *)att-&gt;data)-&gt;type = SVG_PAINT_INHERIT;</span>
<span class="lineNum">     862 </span>            :                 break;
<span class="lineNum">     863 </span><span class="lineCov">          2 :         case TAG_SVG_ATT_stroke_dasharray:</span>
<span class="lineNum">     864 </span><span class="lineCov">          2 :                 ((SVG_StrokeDashArray *)att-&gt;data)-&gt;type = SVG_STROKEDASHARRAY_INHERIT;</span>
<span class="lineNum">     865 </span>            :                 break;
<span class="lineNum">     866 </span><span class="lineCov">         36 :         case TAG_SVG_ATT_fill_opacity:</span>
<span class="lineNum">     867 </span>            :         case TAG_SVG_ATT_stroke_opacity:
<span class="lineNum">     868 </span>            :         case TAG_SVG_ATT_stroke_width:
<span class="lineNum">     869 </span>            :         case TAG_SVG_ATT_font_size:
<span class="lineNum">     870 </span>            :         case TAG_SVG_ATT_line_increment:
<span class="lineNum">     871 </span>            :         case TAG_SVG_ATT_stroke_dashoffset:
<span class="lineNum">     872 </span>            :         case TAG_SVG_ATT_stroke_miterlimit:
<span class="lineNum">     873 </span><span class="lineCov">         36 :                 ((SVG_Number *)att-&gt;data)-&gt;type = SVG_NUMBER_INHERIT;</span>
<span class="lineNum">     874 </span>            :                 break;
<span class="lineNum">     875 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_vector_effect:</span>
<span class="lineNum">     876 </span><span class="lineNoCov">          0 :                 *((SVG_VectorEffect *)att-&gt;data) = SVG_VECTOREFFECT_NONE;</span>
<span class="lineNum">     877 </span>            :                 break;
<span class="lineNum">     878 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_fill_rule:</span>
<span class="lineNum">     879 </span><span class="lineNoCov">          0 :                 *((SVG_FillRule *)att-&gt;data) = SVG_FILLRULE_INHERIT;</span>
<span class="lineNum">     880 </span>            :                 break;
<span class="lineNum">     881 </span><span class="lineCov">          6 :         case TAG_SVG_ATT_font_weight:</span>
<span class="lineNum">     882 </span><span class="lineCov">          6 :                 *((SVG_FontWeight *)att-&gt;data) = SVG_FONTWEIGHT_INHERIT;</span>
<span class="lineNum">     883 </span>            :                 break;
<span class="lineNum">     884 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_visibility:</span>
<span class="lineNum">     885 </span><span class="lineNoCov">          0 :                 *((SVG_Visibility *)att-&gt;data) = SVG_VISIBILITY_INHERIT;</span>
<span class="lineNum">     886 </span>            :                 break;
<span class="lineNum">     887 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_smil_fill:</span>
<span class="lineNum">     888 </span><span class="lineNoCov">          0 :                 *((SMIL_Fill *)att-&gt;data) = SMIL_FILL_REMOVE;</span>
<span class="lineNum">     889 </span>            :                 break;
<span class="lineNum">     890 </span><span class="lineNoCov">          0 :         case TAG_XMLEV_ATT_defaultAction:</span>
<span class="lineNum">     891 </span><span class="lineNoCov">          0 :                 *((XMLEV_DefaultAction *)att-&gt;data) = XMLEVENT_DEFAULTACTION_PERFORM;</span>
<span class="lineNum">     892 </span>            :                 break;
<span class="lineNum">     893 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_zoomAndPan:</span>
<span class="lineNum">     894 </span><span class="lineNoCov">          0 :                 *((SVG_ZoomAndPan *)att-&gt;data) = SVG_ZOOMANDPAN_MAGNIFY;</span>
<span class="lineNum">     895 </span>            :                 break;
<span class="lineNum">     896 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_stroke_linecap:</span>
<span class="lineNum">     897 </span><span class="lineNoCov">          0 :                 *(SVG_StrokeLineCap*)att-&gt;data = SVG_STROKELINECAP_INHERIT;</span>
<span class="lineNum">     898 </span>            :                 break;
<span class="lineNum">     899 </span><span class="lineNoCov">          0 :         case TAG_SVG_ATT_stroke_linejoin:</span>
<span class="lineNum">     900 </span><span class="lineNoCov">          0 :                 *(SVG_StrokeLineJoin*)att-&gt;data = SVG_STROKELINEJOIN_INHERIT;</span>
<span class="lineNum">     901 </span>            :                 break;
<span class="lineNum">     902 </span>            : 
<span class="lineNum">     903 </span><span class="lineCov">          4 :         case TAG_SVG_ATT_transform:</span>
<span class="lineNum">     904 </span><span class="lineCov">          8 :                 gf_mx2d_init(((SVG_Transform*)att-&gt;data)-&gt;mat);</span>
<span class="lineNum">     905 </span>            :                 break;
<span class="lineNum">     906 </span>            : 
<span class="lineNum">     907 </span>            : 
<span class="lineNum">     908 </span>            :         /*all default=0 values (don't need init)*/
<span class="lineNum">     909 </span>            :         case TAG_SVG_ATT_font_family:
<span class="lineNum">     910 </span>            :         case TAG_SVG_ATT_font_style:
<span class="lineNum">     911 </span>            :         case TAG_SVG_ATT_text_anchor:
<span class="lineNum">     912 </span>            :         case TAG_SVG_ATT_x:
<span class="lineNum">     913 </span>            :         case TAG_SVG_ATT_y:
<span class="lineNum">     914 </span>            :                 break;
<span class="lineNum">     915 </span>            : 
<span class="lineNum">     916 </span><span class="lineCov">         43 :         default:</span>
<span class="lineNum">     917 </span><span class="lineCov">         43 :                 GF_LOG(GF_LOG_DEBUG, GF_LOG_SCENE, (&quot;[Scene] Cannot create default value for SVG attribute %s\n&quot;, gf_svg_get_attribute_name(node, att-&gt;tag)));</span>
<span class="lineNum">     918 </span>            :         }
<span class="lineNum">     919 </span><span class="lineCov">        244 : }</span>
<a name="920"><span class="lineNum">     920 </span>            : </a>
<span class="lineNum">     921 </span>            : GF_EXPORT
<span class="lineNum">     922 </span><span class="lineCov">      19556 : GF_Err gf_node_get_attribute_by_tag(GF_Node *node, u32 attribute_tag, Bool create_if_not_found, Bool set_default, GF_FieldInfo *field)</span>
<span class="lineNum">     923 </span>            : {
<span class="lineNum">     924 </span>            :         SVG_Element *elt = (SVG_Element *)node;
<span class="lineNum">     925 </span><span class="lineCov">      19556 :         SVGAttribute *att = elt-&gt;attributes;</span>
<span class="lineNum">     926 </span>            :         SVGAttribute *last_att = NULL;
<span class="lineNum">     927 </span>            : 
<span class="lineNum">     928 </span><span class="lineCov">      96253 :         while (att) {</span>
<span class="lineNum">     929 </span><span class="lineCov">      62627 :                 if ((u32) att-&gt;tag == attribute_tag) {</span>
<span class="lineNum">     930 </span><span class="lineCov">       5486 :                         field-&gt;fieldIndex = att-&gt;tag;</span>
<span class="lineNum">     931 </span><span class="lineCov">       5486 :                         field-&gt;fieldType = att-&gt;data_type;</span>
<span class="lineNum">     932 </span><span class="lineCov">       5486 :                         field-&gt;far_ptr  = att-&gt;data;</span>
<span class="lineNum">     933 </span><span class="lineCov">       5486 :                         return GF_OK;</span>
<span class="lineNum">     934 </span>            :                 }
<span class="lineNum">     935 </span>            :                 last_att = att;
<span class="lineNum">     936 </span><span class="lineCov">      57141 :                 att = att-&gt;next;</span>
<span class="lineNum">     937 </span>            :         }
<span class="lineNum">     938 </span>            : 
<span class="lineNum">     939 </span><span class="lineCov">      14070 :         if (create_if_not_found) {</span>
<span class="lineNum">     940 </span>            :                 /* field not found create one */
<span class="lineNum">     941 </span>            :                 att = gf_xml_create_attribute(node, attribute_tag);
<span class="lineNum">     942 </span><span class="lineCov">      12260 :                 if (att) {</span>
<span class="lineNum">     943 </span><span class="lineCov">      12260 :                         if (!elt-&gt;attributes) elt-&gt;attributes = att;</span>
<span class="lineNum">     944 </span><span class="lineCov">       8438 :                         else last_att-&gt;next = att;</span>
<span class="lineNum">     945 </span><span class="lineCov">      12260 :                         field-&gt;far_ptr = att-&gt;data;</span>
<span class="lineNum">     946 </span><span class="lineCov">      12260 :                         field-&gt;fieldType = att-&gt;data_type;</span>
<span class="lineNum">     947 </span><span class="lineCov">      12260 :                         field-&gt;fieldIndex = att-&gt;tag;</span>
<span class="lineNum">     948 </span>            :                         /* attribute name should not be called, if needed use gf_svg_get_attribute_name(att-&gt;tag);*/
<span class="lineNum">     949 </span><span class="lineCov">      12260 :                         field-&gt;name = NULL;</span>
<span class="lineNum">     950 </span><span class="lineCov">      12260 :                         if (set_default) attributes_set_default_value(node, att);</span>
<span class="lineNum">     951 </span>            :                         return GF_OK;
<span class="lineNum">     952 </span>            :                 }
<span class="lineNum">     953 </span>            :         }
<span class="lineNum">     954 </span>            : 
<span class="lineNum">     955 </span>            :         return GF_NOT_SUPPORTED;
<span class="lineNum">     956 </span>            : }
<a name="957"><span class="lineNum">     957 </span>            : </a>
<span class="lineNum">     958 </span>            : GF_EXPORT
<span class="lineNum">     959 </span><span class="lineCov">        322 : void gf_node_register_iri(GF_SceneGraph *sg, XMLRI *target)</span>
<span class="lineNum">     960 </span>            : {
<span class="lineNum">     961 </span>            : #ifndef GPAC_DISABLE_SVG
<span class="lineNum">     962 </span><span class="lineCov">        322 :         if (gf_list_find(sg-&gt;xlink_hrefs, target)&lt;0) {</span>
<span class="lineNum">     963 </span><span class="lineCov">        320 :                 gf_list_add(sg-&gt;xlink_hrefs, target);</span>
<span class="lineNum">     964 </span>            :         }
<span class="lineNum">     965 </span>            : #endif
<span class="lineNum">     966 </span><span class="lineCov">        322 : }</span>
<a name="967"><span class="lineNum">     967 </span>            : </a>
<span class="lineNum">     968 </span>            : GF_EXPORT
<span class="lineNum">     969 </span><span class="lineCov">       2955 : void gf_node_unregister_iri(GF_SceneGraph *sg, XMLRI *target)</span>
<span class="lineNum">     970 </span>            : {
<span class="lineNum">     971 </span>            : #ifndef GPAC_DISABLE_SVG
<span class="lineNum">     972 </span><span class="lineCov">       2955 :         gf_list_del_item(sg-&gt;xlink_hrefs, target);</span>
<span class="lineNum">     973 </span>            : #endif
<a name="974"><span class="lineNum">     974 </span><span class="lineCov">       2955 : }</span></a>
<span class="lineNum">     975 </span>            : 
<span class="lineNum">     976 </span><span class="lineCov">       2808 : GF_Node *gf_xml_node_clone(GF_SceneGraph *inScene, GF_Node *orig, GF_Node *cloned_parent, char *inst_id, Bool deep)</span>
<span class="lineNum">     977 </span>            : {
<span class="lineNum">     978 </span>            :         GF_DOMAttribute *att;
<span class="lineNum">     979 </span>            :         GF_Node *clone;
<span class="lineNum">     980 </span><span class="lineCov">       2808 :         if (!orig) return NULL;</span>
<span class="lineNum">     981 </span><span class="lineCov">          1 :         clone = gf_node_new(inScene, orig-&gt;sgprivate-&gt;tag);</span>
<span class="lineNum">     982 </span><span class="lineCov">          1 :         if (!clone) return NULL;</span>
<span class="lineNum">     983 </span>            : 
<span class="lineNum">     984 </span><span class="lineCov">          1 :         if (orig-&gt;sgprivate-&gt;tag == TAG_DOMText) {</span>
<span class="lineNum">     985 </span>            :                 GF_DOMText *n_src,*n_dst;
<span class="lineNum">     986 </span>            :                 n_src = (GF_DOMText *)orig;
<span class="lineNum">     987 </span>            :                 n_dst = (GF_DOMText *)clone;
<span class="lineNum">     988 </span><span class="lineNoCov">          0 :                 n_dst-&gt;type = n_src-&gt;type;</span>
<span class="lineNum">     989 </span><span class="lineNoCov">          0 :                 n_dst-&gt;textContent = gf_strdup(n_src-&gt;textContent);</span>
<span class="lineNum">     990 </span>            :         } else {
<span class="lineNum">     991 </span><span class="lineCov">          1 :                 if (orig-&gt;sgprivate-&gt;tag == TAG_DOMFullNode) {</span>
<span class="lineNum">     992 </span>            :                         GF_DOMFullNode *n_src,*n_dst;
<span class="lineNum">     993 </span>            :                         n_src = (GF_DOMFullNode *)orig;
<span class="lineNum">     994 </span>            :                         n_dst = (GF_DOMFullNode *)clone;
<span class="lineNum">     995 </span><span class="lineCov">          1 :                         n_dst-&gt;ns = n_src-&gt;ns;</span>
<span class="lineNum">     996 </span><span class="lineCov">          1 :                         n_dst-&gt;name = gf_strdup(n_src-&gt;name);</span>
<span class="lineNum">     997 </span>            :                 }
<span class="lineNum">     998 </span>            : 
<span class="lineNum">     999 </span><span class="lineCov">          1 :                 att = ((GF_DOMNode *)orig)-&gt;attributes;</span>
<span class="lineNum">    1000 </span><span class="lineCov">          4 :                 while (att) {</span>
<span class="lineNum">    1001 </span>            :                         GF_FieldInfo dst, src;
<span class="lineNum">    1002 </span>            :                         /*create by name*/
<span class="lineNum">    1003 </span><span class="lineCov">          2 :                         if (att-&gt;tag==TAG_DOM_ATT_any) {</span>
<span class="lineNum">    1004 </span><span class="lineCov">          2 :                                 gf_node_get_attribute_by_name(clone, ((GF_DOMFullAttribute*)att)-&gt;name, 0, 1, 0, &amp;dst);</span>
<span class="lineNum">    1005 </span>            :                         } else {
<span class="lineNum">    1006 </span><span class="lineNoCov">          0 :                                 gf_node_get_attribute_by_tag(clone, att-&gt;tag, 1, 0, &amp;dst);</span>
<span class="lineNum">    1007 </span>            :                         }
<span class="lineNum">    1008 </span><span class="lineCov">          2 :                         src.far_ptr = att-&gt;data;</span>
<span class="lineNum">    1009 </span><span class="lineCov">          2 :                         src.fieldType = att-&gt;data_type;</span>
<span class="lineNum">    1010 </span><span class="lineCov">          2 :                         src.fieldIndex = att-&gt;tag;</span>
<span class="lineNum">    1011 </span><span class="lineCov">          2 :                         gf_svg_attributes_copy(&amp;dst, &amp;src, 0);</span>
<span class="lineNum">    1012 </span><span class="lineCov">          2 :                         if (att-&gt;tag==TAG_XLINK_ATT_href) {</span>
<span class="lineNum">    1013 </span><span class="lineNoCov">          0 :                                 XMLRI *iri = (XMLRI *)att-&gt;data;</span>
<span class="lineNum">    1014 </span><span class="lineNoCov">          0 :                                 if (iri-&gt;target == gf_node_get_parent(orig, 0)) {</span>
<span class="lineNum">    1015 </span><span class="lineNoCov">          0 :                                         ((XMLRI *)dst.far_ptr)-&gt;target = cloned_parent;</span>
<span class="lineNum">    1016 </span>            :                                 } else {
<span class="lineNum">    1017 </span><span class="lineNoCov">          0 :                                         ((XMLRI *)dst.far_ptr)-&gt;target = NULL;</span>
<span class="lineNum">    1018 </span>            :                                 }
<span class="lineNum">    1019 </span>            :                         }
<span class="lineNum">    1020 </span><span class="lineCov">          2 :                         att = att-&gt;next;</span>
<span class="lineNum">    1021 </span>            :                 }
<span class="lineNum">    1022 </span>            :         }
<span class="lineNum">    1023 </span><span class="lineCov">          1 :         if (cloned_parent) {</span>
<span class="lineNum">    1024 </span><span class="lineNoCov">          0 :                 gf_node_list_add_child( &amp; ((GF_ParentNode*)cloned_parent)-&gt;children, clone);</span>
<span class="lineNum">    1025 </span><span class="lineNoCov">          0 :                 gf_node_register(clone, cloned_parent);</span>
<span class="lineNum">    1026 </span>            :                 /*TO CLARIFY: can we init the node right now or should we wait for insertion in the scene tree ?*/
<span class="lineNum">    1027 </span><span class="lineNoCov">          0 :                 gf_node_init(clone);</span>
<span class="lineNum">    1028 </span>            :         }
<span class="lineNum">    1029 </span><span class="lineCov">          1 :         if (deep) {</span>
<span class="lineNum">    1030 </span><span class="lineNoCov">          0 :                 GF_ChildNodeItem *child = ((GF_ParentNode *)orig)-&gt;children;</span>
<span class="lineNum">    1031 </span><span class="lineNoCov">          0 :                 while (child) {</span>
<span class="lineNum">    1032 </span><span class="lineNoCov">          0 :                         gf_node_clone(inScene, child-&gt;node, clone, inst_id, 1);</span>
<span class="lineNum">    1033 </span><span class="lineNoCov">          0 :                         child = child-&gt;next;</span>
<span class="lineNum">    1034 </span>            :                 }
<span class="lineNum">    1035 </span>            :         }
<span class="lineNum">    1036 </span>            :         return clone;
<span class="lineNum">    1037 </span>            : }
<span class="lineNum">    1038 </span>            : 
<span class="lineNum">    1039 </span>            : /*TODO FIXME, this is ugly, add proper cache system*/
<span class="lineNum">    1040 </span>            : #include &lt;gpac/base_coding.h&gt;
<a name="1041"><span class="lineNum">    1041 </span>            : </a>
<span class="lineNum">    1042 </span>            : 
<span class="lineNum">    1043 </span><span class="lineNoCov">          0 : static u32 check_existing_file(char *base_file, char *ext, char *data, u32 data_size, u32 idx)</span>
<span class="lineNum">    1044 </span>            : {
<span class="lineNum">    1045 </span>            :         char szFile[GF_MAX_PATH];
<span class="lineNum">    1046 </span>            :         u64 fsize;
<span class="lineNum">    1047 </span>            :         FILE *f;
<span class="lineNum">    1048 </span>            :         int concatres;
<span class="lineNum">    1049 </span>            : 
<span class="lineNum">    1050 </span>            :         concatres = snprintf(szFile, GF_MAX_PATH, &quot;%s%04X%s&quot;, base_file, idx, ext);
<span class="lineNum">    1051 </span><span class="lineNoCov">          0 :         if (concatres&lt;0) {</span>
<span class="lineNum">    1052 </span><span class="lineNoCov">          0 :                 GF_LOG(GF_LOG_WARNING, GF_LOG_CORE, (&quot;Path too long (limit %d) when trying to concatenate %s and %s\n&quot;, GF_MAX_PATH, base_file, ext));</span>
<span class="lineNum">    1053 </span>            :         }
<span class="lineNum">    1054 </span>            : 
<span class="lineNum">    1055 </span><span class="lineNoCov">          0 :         f = gf_fopen(szFile, &quot;rb&quot;);</span>
<span class="lineNum">    1056 </span><span class="lineNoCov">          0 :         if (!f) return 0;</span>
<span class="lineNum">    1057 </span>            : 
<span class="lineNum">    1058 </span><span class="lineNoCov">          0 :         fsize = gf_fsize(f);</span>
<span class="lineNum">    1059 </span><span class="lineNoCov">          0 :         if (fsize==data_size) {</span>
<span class="lineNum">    1060 </span>            :                 u32 offset=0;
<span class="lineNum">    1061 </span>            :                 char cache[1024];
<span class="lineNum">    1062 </span>            : 
<span class="lineNum">    1063 </span><span class="lineNoCov">          0 :                 while (fsize) {</span>
<span class="lineNum">    1064 </span><span class="lineNoCov">          0 :                         u32 read = (u32) gf_fread(cache, 1024, f);</span>
<span class="lineNum">    1065 </span><span class="lineNoCov">          0 :                         if ((s32) read &lt; 0) return 0;</span>
<span class="lineNum">    1066 </span><span class="lineNoCov">          0 :                         fsize -= read;</span>
<span class="lineNum">    1067 </span><span class="lineNoCov">          0 :                         if (memcmp(cache, data+offset, sizeof(char)*read)) break;</span>
<span class="lineNum">    1068 </span><span class="lineNoCov">          0 :                         offset+=read;</span>
<span class="lineNum">    1069 </span>            :                 }
<span class="lineNum">    1070 </span><span class="lineNoCov">          0 :                 gf_fclose(f);</span>
<span class="lineNum">    1071 </span>            :                 f = NULL;
<span class="lineNum">    1072 </span>            :                 /*same file*/
<span class="lineNum">    1073 </span><span class="lineNoCov">          0 :                 if (!fsize) return 2;</span>
<span class="lineNum">    1074 </span>            :         }
<span class="lineNum">    1075 </span>            :         if (f)
<span class="lineNum">    1076 </span><span class="lineNoCov">          0 :                 gf_fclose(f);</span>
<span class="lineNum">    1077 </span>            :         return 1;
<span class="lineNum">    1078 </span>            : }
<span class="lineNum">    1079 </span>            : 
<a name="1080"><span class="lineNum">    1080 </span>            : </a>
<span class="lineNum">    1081 </span>            : GF_EXPORT
<span class="lineNum">    1082 </span><span class="lineCov">         27 : GF_Err gf_node_store_embedded_data(XMLRI *iri, const char *cache_dir, const char *base_filename)</span>
<span class="lineNum">    1083 </span>            : {
<span class="lineNum">    1084 </span>            :         char szFile[GF_MAX_PATH], buf[20], *sep, *data=NULL, *ext;
<span class="lineNum">    1085 </span>            :         u32 data_size=0, idx;
<span class="lineNum">    1086 </span>            :         Bool existing;
<span class="lineNum">    1087 </span>            : 
<span class="lineNum">    1088 </span><span class="lineCov">         27 :         if (!cache_dir || !base_filename || !iri || !iri-&gt;string || strncmp(iri-&gt;string, &quot;data:&quot;, 5)) return GF_OK;</span>
<span class="lineNum">    1089 </span>            : 
<span class="lineNum">    1090 </span>            :         /*handle &quot;data:&quot; scheme when cache is specified*/
<span class="lineNum">    1091 </span>            :         strcpy(szFile, cache_dir);
<span class="lineNum">    1092 </span><span class="lineNoCov">          0 :         data_size = (u32) strlen(szFile);</span>
<span class="lineNum">    1093 </span><span class="lineNoCov">          0 :         if (szFile[data_size-1] != GF_PATH_SEPARATOR) {</span>
<span class="lineNum">    1094 </span><span class="lineNoCov">          0 :                 szFile[data_size] = GF_PATH_SEPARATOR;</span>
<span class="lineNum">    1095 </span><span class="lineNoCov">          0 :                 szFile[data_size+1] = 0;</span>
<span class="lineNum">    1096 </span>            :         }
<span class="lineNum">    1097 </span>            : 
<span class="lineNum">    1098 </span><span class="lineNoCov">          0 :         sep = strrchr(base_filename, GF_PATH_SEPARATOR);</span>
<span class="lineNum">    1099 </span>            : #ifdef WIN32
<span class="lineNum">    1100 </span>            :         if (!sep) sep = strrchr(base_filename, '/');
<span class="lineNum">    1101 </span>            : #endif
<span class="lineNum">    1102 </span><span class="lineNoCov">          0 :         if (!sep) sep = (char *) base_filename;</span>
<span class="lineNum">    1103 </span><span class="lineNoCov">          0 :         else sep += 1;</span>
<span class="lineNum">    1104 </span>            :         strcat(szFile, sep);
<span class="lineNum">    1105 </span>            : 
<span class="lineNum">    1106 </span><span class="lineNoCov">          0 :         sep = gf_file_ext_start(szFile);</span>
<span class="lineNum">    1107 </span><span class="lineNoCov">          0 :         if (sep) sep[0] = 0;</span>
<span class="lineNum">    1108 </span>            :         strcat(szFile, &quot;_img_&quot;);
<span class="lineNum">    1109 </span>            : 
<span class="lineNum">    1110 </span>            :         /*get mime type*/
<span class="lineNum">    1111 </span><span class="lineNoCov">          0 :         sep = (char *)iri-&gt;string + 5;</span>
<span class="lineNum">    1112 </span><span class="lineNoCov">          0 :         if (!strncmp(sep, &quot;image/jpg&quot;, 9) || !strncmp(sep, &quot;image/jpeg&quot;, 10)) ext = &quot;.jpg&quot;;</span>
<span class="lineNum">    1113 </span><span class="lineNoCov">          0 :         else if (!strncmp(sep, &quot;image/png&quot;, 9)) ext = &quot;.png&quot;;</span>
<span class="lineNum">    1114 </span><span class="lineNoCov">          0 :         else if (!strncmp(sep, &quot;image/svg+xml&quot;, 13)) ext = &quot;.svg&quot;;</span>
<span class="lineNum">    1115 </span>            :         else return GF_BAD_PARAM;
<span class="lineNum">    1116 </span>            : 
<span class="lineNum">    1117 </span>            : 
<span class="lineNum">    1118 </span>            :         data = NULL;
<span class="lineNum">    1119 </span><span class="lineNoCov">          0 :         sep = strchr(iri-&gt;string, ';');</span>
<span class="lineNum">    1120 </span><span class="lineNoCov">          0 :         if (!strncmp(sep, &quot;;base64,&quot;, 8)) {</span>
<span class="lineNum">    1121 </span><span class="lineNoCov">          0 :                 sep += 8;</span>
<span class="lineNum">    1122 </span><span class="lineNoCov">          0 :                 data_size = 2 * (u32) strlen(sep);</span>
<span class="lineNum">    1123 </span><span class="lineNoCov">          0 :                 data = (char*)gf_malloc(sizeof(char)*data_size);</span>
<span class="lineNum">    1124 </span><span class="lineNoCov">          0 :                 if (!data) return GF_OUT_OF_MEM;</span>
<span class="lineNum">    1125 </span><span class="lineNoCov">          0 :                 data_size = gf_base64_decode(sep, (u32) strlen(sep), data, data_size);</span>
<span class="lineNum">    1126 </span>            :         }
<span class="lineNum">    1127 </span><span class="lineNoCov">          0 :         else if (!strncmp(sep, &quot;;base16,&quot;, 8)) {</span>
<span class="lineNum">    1128 </span><span class="lineNoCov">          0 :                 data_size = 2 * (u32) strlen(sep);</span>
<span class="lineNum">    1129 </span><span class="lineNoCov">          0 :                 data = (char*)gf_malloc(sizeof(char)*data_size);</span>
<span class="lineNum">    1130 </span><span class="lineNoCov">          0 :                 if (!data) return GF_OUT_OF_MEM;</span>
<span class="lineNum">    1131 </span><span class="lineNoCov">          0 :                 sep += 8;</span>
<span class="lineNum">    1132 </span><span class="lineNoCov">          0 :                 data_size = gf_base16_decode(sep, (u32) strlen(sep), data, data_size);</span>
<span class="lineNum">    1133 </span>            :         }
<span class="lineNum">    1134 </span><span class="lineNoCov">          0 :         if (!data || !data_size) return GF_OK;</span>
<span class="lineNum">    1135 </span>            : 
<span class="lineNum">    1136 </span><span class="lineNoCov">          0 :         iri-&gt;type = XMLRI_STRING;</span>
<span class="lineNum">    1137 </span>            : 
<span class="lineNum">    1138 </span>            :         existing = 0;
<span class="lineNum">    1139 </span>            :         idx = 0;
<span class="lineNum">    1140 </span><span class="lineNoCov">          0 :         while (1) {</span>
<span class="lineNum">    1141 </span><span class="lineNoCov">          0 :                 u32 res = check_existing_file(szFile, ext, data, data_size, idx);</span>
<span class="lineNum">    1142 </span><span class="lineNoCov">          0 :                 if (!res) break;</span>
<span class="lineNum">    1143 </span><span class="lineNoCov">          0 :                 if (res==2) {</span>
<span class="lineNum">    1144 </span>            :                         existing = 1;
<span class="lineNum">    1145 </span>            :                         break;
<span class="lineNum">    1146 </span>            :                 }
<span class="lineNum">    1147 </span><span class="lineNoCov">          0 :                 idx++;</span>
<span class="lineNum">    1148 </span>            :         }
<span class="lineNum">    1149 </span>            :         sprintf(buf, &quot;%04X&quot;, idx);
<span class="lineNum">    1150 </span>            :         strcat(szFile, buf);
<span class="lineNum">    1151 </span>            :         strcat(szFile, ext);
<span class="lineNum">    1152 </span>            : 
<span class="lineNum">    1153 </span><span class="lineNoCov">          0 :         if (!existing) {</span>
<span class="lineNum">    1154 </span><span class="lineNoCov">          0 :                 FILE *f = gf_fopen(szFile, &quot;wb&quot;);</span>
<span class="lineNum">    1155 </span><span class="lineNoCov">          0 :                 if (!f) {</span>
<span class="lineNum">    1156 </span><span class="lineNoCov">          0 :                         gf_free(data);</span>
<span class="lineNum">    1157 </span><span class="lineNoCov">          0 :                         gf_free(iri-&gt;string);</span>
<span class="lineNum">    1158 </span><span class="lineNoCov">          0 :                         iri-&gt;string = NULL;</span>
<span class="lineNum">    1159 </span><span class="lineNoCov">          0 :                         return GF_IO_ERR;</span>
<span class="lineNum">    1160 </span>            :                 }
<span class="lineNum">    1161 </span><span class="lineNoCov">          0 :                 gf_fwrite(data, data_size, f);</span>
<span class="lineNum">    1162 </span><span class="lineNoCov">          0 :                 gf_fclose(f);</span>
<span class="lineNum">    1163 </span>            :         }
<span class="lineNum">    1164 </span><span class="lineNoCov">          0 :         gf_free(data);</span>
<span class="lineNum">    1165 </span><span class="lineNoCov">          0 :         gf_free(iri-&gt;string);</span>
<span class="lineNum">    1166 </span><span class="lineNoCov">          0 :         iri-&gt;string = gf_strdup(szFile);</span>
<span class="lineNum">    1167 </span><span class="lineNoCov">          0 :         return GF_OK;</span>
<span class="lineNum">    1168 </span>            : }
<span class="lineNum">    1169 </span>            : 
<span class="lineNum">    1170 </span>            : 
<span class="lineNum">    1171 </span>            : #endif /*GPAC_DISABLE_SVG*/
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.13</a></td></tr>
  </table>
  <br>

</body>
</html>
